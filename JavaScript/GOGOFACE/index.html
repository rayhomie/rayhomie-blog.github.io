<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTML | rayhomie&#39;s blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/img/headPic.png">
    <link rel="stylesheet" href="/css/style.css">
    <script charset="utf-8" src="/js/showNav.js"></script>
    <meta name="description" content="雷浩的前端开发之路">
    <link rel="preload" href="/assets/css/0.styles.1fbdf1a8.css" as="style"><link rel="preload" href="/assets/js/app.27102bc9.js" as="script"><link rel="preload" href="/assets/js/2.8dfe8e5f.js" as="script"><link rel="preload" href="/assets/js/15.b827ce0c.js" as="script"><link rel="prefetch" href="/assets/js/10.a5add0c3.js"><link rel="prefetch" href="/assets/js/100.8c89d648.js"><link rel="prefetch" href="/assets/js/101.fc717ec9.js"><link rel="prefetch" href="/assets/js/102.d6e7edc0.js"><link rel="prefetch" href="/assets/js/103.8030fd4b.js"><link rel="prefetch" href="/assets/js/104.fef64d82.js"><link rel="prefetch" href="/assets/js/105.c3fca9d7.js"><link rel="prefetch" href="/assets/js/106.b504056d.js"><link rel="prefetch" href="/assets/js/107.c31048aa.js"><link rel="prefetch" href="/assets/js/108.ae5626e1.js"><link rel="prefetch" href="/assets/js/11.7c494a87.js"><link rel="prefetch" href="/assets/js/12.d1bbbdaf.js"><link rel="prefetch" href="/assets/js/13.82c9798f.js"><link rel="prefetch" href="/assets/js/14.2e6f50b9.js"><link rel="prefetch" href="/assets/js/16.603efcc3.js"><link rel="prefetch" href="/assets/js/17.477dc29c.js"><link rel="prefetch" href="/assets/js/18.ab1b43d7.js"><link rel="prefetch" href="/assets/js/19.e0fa9ba5.js"><link rel="prefetch" href="/assets/js/20.d95066c8.js"><link rel="prefetch" href="/assets/js/21.6cd879b8.js"><link rel="prefetch" href="/assets/js/22.5324ab0e.js"><link rel="prefetch" href="/assets/js/23.9218d6d8.js"><link rel="prefetch" href="/assets/js/24.1e19c27f.js"><link rel="prefetch" href="/assets/js/25.6da3fde7.js"><link rel="prefetch" href="/assets/js/26.edd11d9d.js"><link rel="prefetch" href="/assets/js/27.eb67fea8.js"><link rel="prefetch" href="/assets/js/28.6565b2c5.js"><link rel="prefetch" href="/assets/js/29.23d65dc5.js"><link rel="prefetch" href="/assets/js/3.27135dec.js"><link rel="prefetch" href="/assets/js/30.3ad0f117.js"><link rel="prefetch" href="/assets/js/31.17792233.js"><link rel="prefetch" href="/assets/js/32.412220a3.js"><link rel="prefetch" href="/assets/js/33.dcee5d03.js"><link rel="prefetch" href="/assets/js/34.8aac186c.js"><link rel="prefetch" href="/assets/js/35.479f1f88.js"><link rel="prefetch" href="/assets/js/36.538c8db2.js"><link rel="prefetch" href="/assets/js/37.ca793177.js"><link rel="prefetch" href="/assets/js/38.a0bde2fd.js"><link rel="prefetch" href="/assets/js/39.5475ac02.js"><link rel="prefetch" href="/assets/js/4.74cf67b4.js"><link rel="prefetch" href="/assets/js/40.eeab06c6.js"><link rel="prefetch" href="/assets/js/41.33dc67c6.js"><link rel="prefetch" href="/assets/js/42.acb457e3.js"><link rel="prefetch" href="/assets/js/43.6fc9fe3f.js"><link rel="prefetch" href="/assets/js/44.eec80764.js"><link rel="prefetch" href="/assets/js/45.f180ce8d.js"><link rel="prefetch" href="/assets/js/46.c2a4d416.js"><link rel="prefetch" href="/assets/js/47.e9ddff76.js"><link rel="prefetch" href="/assets/js/48.5d4fb10f.js"><link rel="prefetch" href="/assets/js/49.fa19c197.js"><link rel="prefetch" href="/assets/js/5.fff2dba8.js"><link rel="prefetch" href="/assets/js/50.1995f55f.js"><link rel="prefetch" href="/assets/js/51.ad9507a6.js"><link rel="prefetch" href="/assets/js/52.a0c7b4b4.js"><link rel="prefetch" href="/assets/js/53.e6270868.js"><link rel="prefetch" href="/assets/js/54.8b2ab146.js"><link rel="prefetch" href="/assets/js/55.d4b94501.js"><link rel="prefetch" href="/assets/js/56.8799f75c.js"><link rel="prefetch" href="/assets/js/57.70252bd5.js"><link rel="prefetch" href="/assets/js/58.b55c98a5.js"><link rel="prefetch" href="/assets/js/59.a40bf0aa.js"><link rel="prefetch" href="/assets/js/6.7a238015.js"><link rel="prefetch" href="/assets/js/60.b32822f8.js"><link rel="prefetch" href="/assets/js/61.96e132e4.js"><link rel="prefetch" href="/assets/js/62.5b156fb7.js"><link rel="prefetch" href="/assets/js/63.252fdde0.js"><link rel="prefetch" href="/assets/js/64.870eb635.js"><link rel="prefetch" href="/assets/js/65.00cf779d.js"><link rel="prefetch" href="/assets/js/66.edfb8eec.js"><link rel="prefetch" href="/assets/js/67.21c62f6c.js"><link rel="prefetch" href="/assets/js/68.e8153158.js"><link rel="prefetch" href="/assets/js/69.c886c8dc.js"><link rel="prefetch" href="/assets/js/7.4ccf6b5f.js"><link rel="prefetch" href="/assets/js/70.103bfe88.js"><link rel="prefetch" href="/assets/js/71.1da9ddc7.js"><link rel="prefetch" href="/assets/js/72.5259cf72.js"><link rel="prefetch" href="/assets/js/73.2e99bbf9.js"><link rel="prefetch" href="/assets/js/74.15325ce0.js"><link rel="prefetch" href="/assets/js/75.feb3fe93.js"><link rel="prefetch" href="/assets/js/76.c6ffd0de.js"><link rel="prefetch" href="/assets/js/77.1f15986e.js"><link rel="prefetch" href="/assets/js/78.26e8059a.js"><link rel="prefetch" href="/assets/js/79.5aecad9a.js"><link rel="prefetch" href="/assets/js/8.086b5469.js"><link rel="prefetch" href="/assets/js/80.0d468094.js"><link rel="prefetch" href="/assets/js/81.869965a4.js"><link rel="prefetch" href="/assets/js/82.5161670c.js"><link rel="prefetch" href="/assets/js/83.24394a20.js"><link rel="prefetch" href="/assets/js/84.4abbb214.js"><link rel="prefetch" href="/assets/js/85.c5442ded.js"><link rel="prefetch" href="/assets/js/86.787b4128.js"><link rel="prefetch" href="/assets/js/87.32e54ac7.js"><link rel="prefetch" href="/assets/js/88.5da20419.js"><link rel="prefetch" href="/assets/js/89.eccb9167.js"><link rel="prefetch" href="/assets/js/9.01377c1a.js"><link rel="prefetch" href="/assets/js/90.538ac538.js"><link rel="prefetch" href="/assets/js/91.ffb107cd.js"><link rel="prefetch" href="/assets/js/92.c683e420.js"><link rel="prefetch" href="/assets/js/93.e4e30951.js"><link rel="prefetch" href="/assets/js/94.6df7640a.js"><link rel="prefetch" href="/assets/js/95.9ea7d0a8.js"><link rel="prefetch" href="/assets/js/96.1659aa5a.js"><link rel="prefetch" href="/assets/js/97.3b3b507b.js"><link rel="prefetch" href="/assets/js/98.12e89dfd.js"><link rel="prefetch" href="/assets/js/99.a2de8da9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1fbdf1a8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">rayhomie's blog</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架学习" class="dropdown-title"><span class="title">框架学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/VUE/vueBase/" class="nav-link">
  vue基础
</a></li><li class="dropdown-item"><!----> <a href="/VUE/vueComponent/" class="nav-link">
  vue组件化编码
</a></li><li class="dropdown-item"><!----> <a href="/VUE/vue_webpack_modules/" class="nav-link">
  webpacke模块化开发
</a></li><li class="dropdown-item"><!----> <a href="/VUE/vue-cli/" class="nav-link">
  vue-cli脚手架
</a></li><li class="dropdown-item"><!----> <a href="/VUE/vue-router/" class="nav-link">
  vue-router路由
</a></li><li class="dropdown-item"><!----> <a href="/VUE/vuex-learn/" class="nav-link">
  vuex状态管理
</a></li><li class="dropdown-item"><!----> <a href="/VUE/VueMixin/" class="nav-link">
  Mixins混入
</a></li><li class="dropdown-item"><!----> <a href="/VUE/vueBoost/" class="nav-link">
  vue性能优化
</a></li><li class="dropdown-item"><!----> <a href="/VUE/axios/" class="nav-link">
  Axios框架
</a></li><li class="dropdown-item"><!----> <a href="/VUE/ajax/" class="nav-link">
  Ajax
</a></li><li class="dropdown-item"><!----> <a href="/VUE/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/VUE/mock/" class="nav-link">
  mock
</a></li><li class="dropdown-item"><!----> <a href="/VUE/wxprogram/" class="nav-link">
  小程序入门
</a></li><li class="dropdown-item"><!----> <a href="/VUE/uniapp/" class="nav-link">
  uni-app入门
</a></li><li class="dropdown-item"><!----> <a href="/VUE/Reactbase/" class="nav-link">
  React基础入门
</a></li><li class="dropdown-item"><!----> <a href="/VUE/ReactCli/" class="nav-link">
  React脚手架
</a></li><li class="dropdown-item"><!----> <a href="/VUE/Redux/" class="nav-link">
  Redux
</a></li><li class="dropdown-item"><!----> <a href="/VUE/react-redux/" class="nav-link">
  react-redux的实现原理
</a></li><li class="dropdown-item"><!----> <a href="/VUE/Hooks/" class="nav-link">
  React Hooks
</a></li><li class="dropdown-item"><!----> <a href="/VUE/reactRender/" class="nav-link">
  react渲染和更新机制
</a></li><li class="dropdown-item"><!----> <a href="/VUE/setState/" class="nav-link">
  setState进阶
</a></li><li class="dropdown-item"><!----> <a href="/VUE/nextTick/" class="nav-link">
  Vue.nextTick进阶
</a></li><li class="dropdown-item"><!----> <a href="/VUE/reactHighCom/" class="nav-link">
  react高阶组件
</a></li><li class="dropdown-item"><!----> <a href="/VUE/Reactevent/" class="nav-link">
  react合成事件分析
</a></li><li class="dropdown-item"><!----> <a href="/VUE/frontLogin/" class="nav-link">
  前端登录
</a></li><li class="dropdown-item"><!----> <a href="/VUE/CORS&amp;proxy/" class="nav-link">
  CORS跨域和反向代理
</a></li><li class="dropdown-item"><!----> <a href="/VUE/XHR&amp;AJAX/" class="nav-link">
  XHR对象和AJAX
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Node/Nodejs/" class="nav-link">
  Nodejs服务端
</a></li><li class="dropdown-item"><!----> <a href="/Node/restudyNode/" class="nav-link">
  重学Node
</a></li><li class="dropdown-item"><!----> <a href="/Node/restudyWebpack/" class="nav-link">
  重学Webpack
</a></li><li class="dropdown-item"><!----> <a href="/Node/promisify/" class="nav-link">
  手写util.promisify
</a></li><li class="dropdown-item"><!----> <a href="/Node/Blob/" class="nav-link">
  Blob数据
</a></li><li class="dropdown-item"><!----> <a href="/Node/nodejsStreamCopy/" class="nav-link">
  nodejs管道流复制文件
</a></li><li class="dropdown-item"><!----> <a href="/Node/Docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/Node/gitlabci/" class="nav-link">
  gitlab-ci
</a></li><li class="dropdown-item"><!----> <a href="/Node/Express/" class="nav-link">
  Express
</a></li><li class="dropdown-item"><!----> <a href="/Node/Koa/" class="nav-link">
  Koa
</a></li><li class="dropdown-item"><!----> <a href="/Node/koaDeploy/" class="nav-link">
  koa部署服务器
</a></li><li class="dropdown-item"><!----> <a href="/Node/MongoDB/" class="nav-link">
  MongoDB
</a></li><li class="dropdown-item"><!----> <a href="/Node/Mongoose/" class="nav-link">
  Mongoose
</a></li><li class="dropdown-item"><!----> <a href="/Node/zx/" class="nav-link">
  zx库
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript学习" class="dropdown-title"><span class="title">JavaScript学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaScript/note/" class="nav-link">
  js笔记
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/GOGOFACE/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  校招面试冲刺
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/manager/" class="nav-link">
  js知识整理
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/nodejs/" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/Promise/" class="nav-link">
  Promise
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/AOP/" class="nav-link">
  AOP切面编程(闭包)
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/Generator&amp;yield/" class="nav-link">
  Generator生成器&amp;Iterator迭代器
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/asyncReturn/" class="nav-link">
  async中return和return await的区别
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/jsFaceObject/" class="nav-link">
  js面向对象基础--创建对象
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/jsPtototypeChain/" class="nav-link">
  js面向对象基础--原型链
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/jsBaseExtends/" class="nav-link">
  js面向对象基础--继承
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/jsPrototypeExtends/" class="nav-link">
  js原型继承
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/JavaScriptCodeClean/" class="nav-link">
  JavaScript代码整洁之道
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/JavaScriptEventLoop/" class="nav-link">
  JavaScript事件循环各种概念剖析
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/JavaScriptThisPoint/" class="nav-link">
  JavaScript简单理解this指向
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/es6this/" class="nav-link">
  谈谈ES6箭头函数this指向问题
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/environment/" class="nav-link">
  词法环境[[environment]]--闭包
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/zuoyongyu/" class="nav-link">
  js函数作用域与闭包相关问题
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/varHosting/" class="nav-link">
  js中的变量提升和函数提升
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/VO&amp;AO/" class="nav-link">
  JS中的变量对象VO和活动对象AO
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/JScenter/" class="nav-link">
  JS核心机制（数据类型、垃圾回收机制）
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/handCallApplyBind/" class="nav-link">
  手写call、apply、bind
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/DataStructure/note/" class="nav-link">
  笔记整理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CSS特效" class="dropdown-title"><span class="title">CSS特效</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/CSSEffect/moreColumLayout/" class="nav-link">
  CSS多列布局的实现
</a></li><li class="dropdown-item"><!----> <a href="/CSSEffect/writeWords/" class="nav-link">
  打字机效果以及animation中的steps()函数
</a></li><li class="dropdown-item"><!----> <a href="/CSSEffect/box-shadow/" class="nav-link">
  CSS的box-shadow创建边框
</a></li><li class="dropdown-item"><!----> <a href="/CSSEffect/CSSPointshow/" class="nav-link">
  纯CSS实现的滚动指示器效果
</a></li><li class="dropdown-item"><!----> <a href="/CSSEffect/img-lazyload/" class="nav-link">
  图片模糊加载
</a></li><li class="dropdown-item"><!----> <a href="/CSSEffect/tuozhuai/" class="nav-link">
  实现一个拖拽
</a></li><li class="dropdown-item"><!----> <a href="/CSSEffect/positionSticky/" class="nav-link">
  实现position:sticky
</a></li><li class="dropdown-item"><!----> <a href="/CSSEffect/lazyLoad/" class="nav-link">
  实现下拉加载更多，懒加载
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="随便聊聊" class="dropdown-title"><span class="title">随便聊聊</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/talktalk/onePic/" class="nav-link">
  一张图总结系列
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/argument/" class="nav-link">
  js的argument
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/bibao/" class="nav-link">
  闭包个人理解
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/eventloop/" class="nav-link">
  Event Loop理解
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/chuandicanshu/" class="nav-link">
  js参数传递理解
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/var/" class="nav-link">
  聊聊js变量存储的本质和const修改对象问题
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/es6open/" class="nav-link">
  ES6扩展运算符的使用
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/dataInVue/" class="nav-link">
  为什么.vue文件中data必须用函数表达
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/jsMaopao/" class="nav-link">
  浅谈js事件捕获和事件冒泡
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/CSSFaceTest/" class="nav-link">
  CSS 面试知识点总结
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/CSSFirst/" class="nav-link">
  CSS 属性继承和优先级算法(权重)
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/CSSSelector/" class="nav-link">
  了解 CSS 选择器
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/CSSCenter/" class="nav-link">
  总结一下 CSS 居中的各种方法
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/CSSFloat/" class="nav-link">
  说说CSS浮动以及清除浮动
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/CSSMargin/" class="nav-link">
  外边距塌陷问题
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/CSSBFC/" class="nav-link">
  浅谈BFC
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/HTTP/" class="nav-link">
  HTTP协议
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/HTTPS/" class="nav-link">
  聊聊HTTPS工作原理
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/thread/" class="nav-link">
  进程与线程tcp/ip三次握手
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/HtmlHead/" class="nav-link">
  你知道HTML中Head标签具体怎么用吗？
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/JSONStringify/" class="nav-link">
  JSON.stringify()还可以这么玩
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/ObjectAssign/" class="nav-link">
  Object.assign()的使用指南
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/debounce/" class="nav-link">
  简单防抖函数中闭包的问题理解
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/throttle/" class="nav-link">
  简单节流函数中闭包的问题理解
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/doubleBinding/" class="nav-link">
  多种实现双向绑定方法
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/ReactClassComponent/" class="nav-link">
  React类组件的一些问题浅析
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/brower/" class="nav-link">
  浏览器运行原理
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/commonJS&amp;ESmodules/" class="nav-link">
  commonJS和ESmodules差异
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/DOMDIFF/" class="nav-link">
  vue中:key=index为什么不建议使用？
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/constUseState/" class="nav-link">
  为什么useState可以使用const解构赋值？
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/pipeCopy/" class="nav-link">
  使用管道流复制大文件
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架学习" class="dropdown-title"><span class="title">框架学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/VUE/vueBase/" class="nav-link">
  vue基础
</a></li><li class="dropdown-item"><!----> <a href="/VUE/vueComponent/" class="nav-link">
  vue组件化编码
</a></li><li class="dropdown-item"><!----> <a href="/VUE/vue_webpack_modules/" class="nav-link">
  webpacke模块化开发
</a></li><li class="dropdown-item"><!----> <a href="/VUE/vue-cli/" class="nav-link">
  vue-cli脚手架
</a></li><li class="dropdown-item"><!----> <a href="/VUE/vue-router/" class="nav-link">
  vue-router路由
</a></li><li class="dropdown-item"><!----> <a href="/VUE/vuex-learn/" class="nav-link">
  vuex状态管理
</a></li><li class="dropdown-item"><!----> <a href="/VUE/VueMixin/" class="nav-link">
  Mixins混入
</a></li><li class="dropdown-item"><!----> <a href="/VUE/vueBoost/" class="nav-link">
  vue性能优化
</a></li><li class="dropdown-item"><!----> <a href="/VUE/axios/" class="nav-link">
  Axios框架
</a></li><li class="dropdown-item"><!----> <a href="/VUE/ajax/" class="nav-link">
  Ajax
</a></li><li class="dropdown-item"><!----> <a href="/VUE/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/VUE/mock/" class="nav-link">
  mock
</a></li><li class="dropdown-item"><!----> <a href="/VUE/wxprogram/" class="nav-link">
  小程序入门
</a></li><li class="dropdown-item"><!----> <a href="/VUE/uniapp/" class="nav-link">
  uni-app入门
</a></li><li class="dropdown-item"><!----> <a href="/VUE/Reactbase/" class="nav-link">
  React基础入门
</a></li><li class="dropdown-item"><!----> <a href="/VUE/ReactCli/" class="nav-link">
  React脚手架
</a></li><li class="dropdown-item"><!----> <a href="/VUE/Redux/" class="nav-link">
  Redux
</a></li><li class="dropdown-item"><!----> <a href="/VUE/react-redux/" class="nav-link">
  react-redux的实现原理
</a></li><li class="dropdown-item"><!----> <a href="/VUE/Hooks/" class="nav-link">
  React Hooks
</a></li><li class="dropdown-item"><!----> <a href="/VUE/reactRender/" class="nav-link">
  react渲染和更新机制
</a></li><li class="dropdown-item"><!----> <a href="/VUE/setState/" class="nav-link">
  setState进阶
</a></li><li class="dropdown-item"><!----> <a href="/VUE/nextTick/" class="nav-link">
  Vue.nextTick进阶
</a></li><li class="dropdown-item"><!----> <a href="/VUE/reactHighCom/" class="nav-link">
  react高阶组件
</a></li><li class="dropdown-item"><!----> <a href="/VUE/Reactevent/" class="nav-link">
  react合成事件分析
</a></li><li class="dropdown-item"><!----> <a href="/VUE/frontLogin/" class="nav-link">
  前端登录
</a></li><li class="dropdown-item"><!----> <a href="/VUE/CORS&amp;proxy/" class="nav-link">
  CORS跨域和反向代理
</a></li><li class="dropdown-item"><!----> <a href="/VUE/XHR&amp;AJAX/" class="nav-link">
  XHR对象和AJAX
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Node/Nodejs/" class="nav-link">
  Nodejs服务端
</a></li><li class="dropdown-item"><!----> <a href="/Node/restudyNode/" class="nav-link">
  重学Node
</a></li><li class="dropdown-item"><!----> <a href="/Node/restudyWebpack/" class="nav-link">
  重学Webpack
</a></li><li class="dropdown-item"><!----> <a href="/Node/promisify/" class="nav-link">
  手写util.promisify
</a></li><li class="dropdown-item"><!----> <a href="/Node/Blob/" class="nav-link">
  Blob数据
</a></li><li class="dropdown-item"><!----> <a href="/Node/nodejsStreamCopy/" class="nav-link">
  nodejs管道流复制文件
</a></li><li class="dropdown-item"><!----> <a href="/Node/Docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/Node/gitlabci/" class="nav-link">
  gitlab-ci
</a></li><li class="dropdown-item"><!----> <a href="/Node/Express/" class="nav-link">
  Express
</a></li><li class="dropdown-item"><!----> <a href="/Node/Koa/" class="nav-link">
  Koa
</a></li><li class="dropdown-item"><!----> <a href="/Node/koaDeploy/" class="nav-link">
  koa部署服务器
</a></li><li class="dropdown-item"><!----> <a href="/Node/MongoDB/" class="nav-link">
  MongoDB
</a></li><li class="dropdown-item"><!----> <a href="/Node/Mongoose/" class="nav-link">
  Mongoose
</a></li><li class="dropdown-item"><!----> <a href="/Node/zx/" class="nav-link">
  zx库
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript学习" class="dropdown-title"><span class="title">JavaScript学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaScript/note/" class="nav-link">
  js笔记
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/GOGOFACE/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  校招面试冲刺
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/manager/" class="nav-link">
  js知识整理
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/nodejs/" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/Promise/" class="nav-link">
  Promise
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/AOP/" class="nav-link">
  AOP切面编程(闭包)
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/Generator&amp;yield/" class="nav-link">
  Generator生成器&amp;Iterator迭代器
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/asyncReturn/" class="nav-link">
  async中return和return await的区别
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/jsFaceObject/" class="nav-link">
  js面向对象基础--创建对象
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/jsPtototypeChain/" class="nav-link">
  js面向对象基础--原型链
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/jsBaseExtends/" class="nav-link">
  js面向对象基础--继承
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/jsPrototypeExtends/" class="nav-link">
  js原型继承
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/JavaScriptCodeClean/" class="nav-link">
  JavaScript代码整洁之道
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/JavaScriptEventLoop/" class="nav-link">
  JavaScript事件循环各种概念剖析
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/JavaScriptThisPoint/" class="nav-link">
  JavaScript简单理解this指向
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/es6this/" class="nav-link">
  谈谈ES6箭头函数this指向问题
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/environment/" class="nav-link">
  词法环境[[environment]]--闭包
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/zuoyongyu/" class="nav-link">
  js函数作用域与闭包相关问题
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/varHosting/" class="nav-link">
  js中的变量提升和函数提升
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/VO&amp;AO/" class="nav-link">
  JS中的变量对象VO和活动对象AO
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/JScenter/" class="nav-link">
  JS核心机制（数据类型、垃圾回收机制）
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/handCallApplyBind/" class="nav-link">
  手写call、apply、bind
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/DataStructure/note/" class="nav-link">
  笔记整理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CSS特效" class="dropdown-title"><span class="title">CSS特效</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/CSSEffect/moreColumLayout/" class="nav-link">
  CSS多列布局的实现
</a></li><li class="dropdown-item"><!----> <a href="/CSSEffect/writeWords/" class="nav-link">
  打字机效果以及animation中的steps()函数
</a></li><li class="dropdown-item"><!----> <a href="/CSSEffect/box-shadow/" class="nav-link">
  CSS的box-shadow创建边框
</a></li><li class="dropdown-item"><!----> <a href="/CSSEffect/CSSPointshow/" class="nav-link">
  纯CSS实现的滚动指示器效果
</a></li><li class="dropdown-item"><!----> <a href="/CSSEffect/img-lazyload/" class="nav-link">
  图片模糊加载
</a></li><li class="dropdown-item"><!----> <a href="/CSSEffect/tuozhuai/" class="nav-link">
  实现一个拖拽
</a></li><li class="dropdown-item"><!----> <a href="/CSSEffect/positionSticky/" class="nav-link">
  实现position:sticky
</a></li><li class="dropdown-item"><!----> <a href="/CSSEffect/lazyLoad/" class="nav-link">
  实现下拉加载更多，懒加载
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="随便聊聊" class="dropdown-title"><span class="title">随便聊聊</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/talktalk/onePic/" class="nav-link">
  一张图总结系列
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/argument/" class="nav-link">
  js的argument
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/bibao/" class="nav-link">
  闭包个人理解
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/eventloop/" class="nav-link">
  Event Loop理解
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/chuandicanshu/" class="nav-link">
  js参数传递理解
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/var/" class="nav-link">
  聊聊js变量存储的本质和const修改对象问题
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/es6open/" class="nav-link">
  ES6扩展运算符的使用
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/dataInVue/" class="nav-link">
  为什么.vue文件中data必须用函数表达
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/jsMaopao/" class="nav-link">
  浅谈js事件捕获和事件冒泡
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/CSSFaceTest/" class="nav-link">
  CSS 面试知识点总结
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/CSSFirst/" class="nav-link">
  CSS 属性继承和优先级算法(权重)
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/CSSSelector/" class="nav-link">
  了解 CSS 选择器
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/CSSCenter/" class="nav-link">
  总结一下 CSS 居中的各种方法
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/CSSFloat/" class="nav-link">
  说说CSS浮动以及清除浮动
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/CSSMargin/" class="nav-link">
  外边距塌陷问题
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/CSSBFC/" class="nav-link">
  浅谈BFC
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/HTTP/" class="nav-link">
  HTTP协议
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/HTTPS/" class="nav-link">
  聊聊HTTPS工作原理
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/thread/" class="nav-link">
  进程与线程tcp/ip三次握手
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/HtmlHead/" class="nav-link">
  你知道HTML中Head标签具体怎么用吗？
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/JSONStringify/" class="nav-link">
  JSON.stringify()还可以这么玩
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/ObjectAssign/" class="nav-link">
  Object.assign()的使用指南
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/debounce/" class="nav-link">
  简单防抖函数中闭包的问题理解
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/throttle/" class="nav-link">
  简单节流函数中闭包的问题理解
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/doubleBinding/" class="nav-link">
  多种实现双向绑定方法
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/ReactClassComponent/" class="nav-link">
  React类组件的一些问题浅析
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/brower/" class="nav-link">
  浏览器运行原理
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/commonJS&amp;ESmodules/" class="nav-link">
  commonJS和ESmodules差异
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/DOMDIFF/" class="nav-link">
  vue中:key=index为什么不建议使用？
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/constUseState/" class="nav-link">
  为什么useState可以使用const解构赋值？
</a></li><li class="dropdown-item"><!----> <a href="/talktalk/pipeCopy/" class="nav-link">
  使用管道流复制大文件
</a></li></ul></div></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="html"><a href="#html" class="header-anchor">#</a> HTML</h1> <h3 id="_1】语义化"><a href="#_1】语义化" class="header-anchor">#</a> 1】语义化</h3> <ol><li>标题就使用h1~h5</li> <li>文章就写article标签</li> <li>时间就是用time标签</li> <li>画板就是用canvas标签</li></ol> <p>后台写html阶段：table标签布局；美工阶段：div+css布局不够语义化；前端阶段：选择正确的标签描述正确的内容。</p> <ul><li><p>尽可能少的使用无语义的标签div和span</p></li> <li><p>在语义化不明显时，<strong>尽量使用p标签</strong>，因为p在默认情况下有上下间距</p></li> <li><p>需要强调的文本，可以包含在<strong>strong或em标签</strong>中，strong默认样式是加粗（不要用b），em是斜体（不要用i）</p> <p>什么是语义化？就是用合理、正确的标签来展示内容，比如h1~h6定义标题。</p></li></ul> <p><code>&lt;header&gt;</code>、<code>&lt;nav&gt;</code>、<code>&lt;main&gt;</code>、<code>&lt;article&gt;</code>、<code>&lt;aside&gt;</code>、<code>&lt;footer&gt;</code>、<code>&lt;section&gt;</code>、<code>&lt;video&gt;</code>、<code>&lt;audio&gt;</code>、<code>&lt;canvas&gt;</code>：获取canvas、设置2d上下文、设置画笔颜色、设置画笔范围</p> <h3 id="_2】响应式布局（媒体查询）"><a href="#_2】响应式布局（媒体查询）" class="header-anchor">#</a> 2】响应式布局（媒体查询）</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>响应式布局<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
      <span class="token atrule"><span class="token rule">@media</span> screen and <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 992px<span class="token punctuation">)</span></span><span class="token punctuation">{</span>
        <span class="token comment">/*pc端*/</span>
      <span class="token punctuation">}</span>
      <span class="token atrule"><span class="token rule">@media</span> screen and <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 768px<span class="token punctuation">)</span> and <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 992px<span class="token punctuation">)</span></span><span class="token punctuation">{</span>
        <span class="token comment">/*pad端*/</span>
      <span class="token punctuation">}</span>
      <span class="token atrule"><span class="token rule">@media</span> screen and <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 768px<span class="token punctuation">)</span></span><span class="token punctuation">{</span>
        <span class="token comment">/*移动端*/</span>
      <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>使用viewport meta设置视口宽度和默认缩放比（针对移动端浏览器）</p> <ul><li>device-width为设备分辨率宽度</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0, user-scalable=no<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
name=&quot;viewport&quot;说明此meta标签定义视口的属性
width=device-width宽度等于设备宽度
initial-scale=1.0初始化缩放比为1
maximum-scale=3允许用户放大至3倍
minimum-scale=0.5允许用户缩小至0.5倍
user-scalable=no禁止用户缩放
</code></pre></div><h3 id="_3】像素单位"><a href="#_3】像素单位" class="header-anchor">#</a> 3】像素单位</h3> <ul><li>px逻辑像素</li> <li>dp设备像素、物理像素</li> <li>ppi屏幕每英寸像素数量，手机电脑的尺寸都是指对角线的长度为X英寸。
<ul><li>ppi=对角线的物理像素/对角线长度</li></ul></li> <li>dpr设备像素比：是默认缩放为100%的情况下，设备像素和CSS像素的比值
<ul><li>dpr=dp/px</li> <li>一般这个值是设备固定的，厂商设置。</li></ul></li> <li>每一个手机都有一个逻辑像素分辨率比如：iPhone 5分辨率为320x568 px
<ul><li>device-width为设备分辨率宽度</li></ul></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>viewport<span class="token punctuation">'</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>width=device-width,initial-sacle=1,user-scalable=no<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
让移动端视口是宽度等于设备分辨率宽度
</code></pre></div><h3 id="_4】-doctype作用"><a href="#_4】-doctype作用" class="header-anchor">#</a> 4】!DOCTYPE作用</h3> <p><code>&lt;!DOCTYPE html&gt;</code><strong>文档声明</strong>：告诉浏览器我们使用的版本号为HTML5的版本，它<strong>不是HTML标签</strong>。</p> <p><strong>声明文档的解析类型(document.compatMode)，避免浏览器的怪异模式。</strong></p> <p><code>document.compatMode</code>：</p> <ul><li><code>BackCompat</code>：<strong>怪异模式</strong>，浏览器使用自己的怪异模式解析渲染页面。</li> <li><code>CSS1Compat</code>：<strong>标准模式</strong>，浏览器使用W3C的标准解析渲染页面。</li></ul> <p>这个属性会被浏览器识别并使用，但是如果你的页面没有<code>DOCTYPE</code>的声明，那么<code>compatMode</code>默认就是<code>BackCompat</code>，如果你的页面添加了<code>&lt;!DOCTYPE html&gt;</code>那么，那么就等同于开启了标准模式，那么浏览器就得老老实实的按照W3C的标准解析渲染页面，这样一来，你的页面在所有的浏览器里显示的就都是一个样子了。</p> <h3 id="_5】script标签（defer、async）"><a href="#_5】script标签（defer、async）" class="header-anchor">#</a> 5】script标签（<a href="https://segmentfault.com/q/1010000000640869" target="_blank" rel="noopener noreferrer">defer、async<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）</h3> <p><img src="https://img-blog.csdnimg.cn/20200814184558762.png#pic_center" alt="在这里插入图片描述"></p> <h3 id="_6】浏览器运行原理"><a href="#_6】浏览器运行原理" class="header-anchor">#</a> 6】浏览器运行原理</h3> <p>常见的面试题：从用户在浏览器地址栏输入网址，到看到页面，中间都发生了什么？</p> <p>涉及知识点：TCP协议的三次握手四次挥手、HTTP报文、状态码、304缓存、DNS缓存、性能优化、重绘回流、AST语法解析树、DOM树、Layout树、Layer树、requestAnimationFrame、同步异步编程、闭包作用域、堆栈内存、面向对象、微任务和宏任务、事件循环、AJAX同源请求和跨域请求解决方案、Cookie和Session以及Token</p> <ul><li>HTTP的请求阶段：DNS解析，TCP三次握手四次挥手、HTTPS和HTTP的区别等</li> <li>HTTP的响应阶段：HTTP状态码（304缓存），响应报文等</li> <li>浏览器渲染阶段：重绘回流等</li></ul> <h5 id="_1】进程和线程"><a href="#_1】进程和线程" class="header-anchor">#</a> 1】进程和线程</h5> <p>进程Process：进程通俗讲就是我们开的每一个程序</p> <p>线程Thread：每个程序（进程）可能会做很多事情（子任务），就是线程</p> <p>栈内存Stack：运行代码的环境（存放指针，这些指针指向堆内存）</p> <h5 id="_2】parsehtml中dom-css-js的顺序"><a href="#_2】parsehtml中dom-css-js的顺序" class="header-anchor">#</a> 2】<a href="https://blog.csdn.net/greenqingqingws/article/details/19552313?utm_source=blogxgwz3" target="_blank" rel="noopener noreferrer">parseHTML中dom,css,js的顺序<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h5> <p>CSS样式表</p> <p>浏览器在加载网页的过程中，先下载HTML并开始解析。如果发现外部CSS资源链接，就发送下载请求。浏览器在下载CSS资源的同时，解析HTML文件。</p> <p>在应用样式的时候，不会更改DOM树，而是生成CSS树，因此<strong>解析样式表的时候也不会停止文档解析</strong>。</p> <p>JS脚本</p> <p>解析器遇到<code>&lt;script&gt;</code>标记时，立即解析并执行脚本。一旦发现有脚本文件的引用，就必须等待脚本文件下载完。这时，文档的解析会暂停，并且等到脚本执行完再继续。所以，脚本文件的下载和执行，会阻断其他资源文件的下载。<strong>JS会阻塞解析HTML</strong>。所以建议<code>&lt;script&gt;</code>一般放最后面，或者使用<strong>defer或者async</strong>属性异步加载。</p> <p><img src="https://img-blog.csdnimg.cn/20200814184558762.png#pic_center" alt="在这里插入图片描述"></p> <h5 id="_3】图解"><a href="#_3】图解" class="header-anchor">#</a> 3】图解</h5> <p>浏览器地址栏输入字符，浏览器进程的UI线程会捕捉输入内容，如果访问的是一个网址，则UI线程会启动一个网络线程，来请求DNS进行域名解析，接着使用IP地址进行TCP连接服务器，再使用HTTP请求数据和响应数据，浏览器主线程开辟执行上下栈，解析html上下文。</p> <p>主线程：<strong>dom tree&amp;&amp;css tree</strong>---结合---》<strong>layout tree</strong>（layout过程）---》update <strong>layertree</strong>（形成层叠上下文的过程）--》<strong>paint</strong>（计算层叠上下文，<strong>形成表记录</strong>在哪绘制，啥时绘制）--》<strong>composite</strong>（绘制我们记录的表）</p> <p>合成器线程----》整个过程<strong>栅格化数据</strong>，把画面分块，（可视化区域）再组合形成Frame---交给---》GPU线程去渲染。</p> <p>之后的话，重排和重绘以及js执行或者用户行为都会占用主线程。</p> <p><img src="https://img-blog.csdnimg.cn/20200814233010875.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTIyMTAzNg==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p> <p><img src="https://img-blog.csdnimg.cn/20200814225328815.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTIyMTAzNg==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p> <h5 id="_4】回流和重绘"><a href="#_4】回流和重绘" class="header-anchor">#</a> 4】回流和重绘</h5> <ul><li>布局是页面首次加载时进行的操作，重新布局即为回流。
 - 绘制是页面首次加载时进行的操作，重新绘制即为重绘。</li></ul> <p>使用transform属性不会导致重绘和重排，因为是运行在合成器线程和栅格化线程中，硬件加速</p> <p>JS同步任务时间执行过长，会抢占主线程，变卡顿。</p> <h5 id="_5】requestanimationframe优化"><a href="#_5】requestanimationframe优化" class="header-anchor">#</a> 5】requestAnimationFrame优化</h5> <p>当页面或者动画以每秒60帧的刷新率时，才不会让用户感觉页面卡顿。</p> <p>如果每一帧在运行动画的时候，还有大量JS任务需要执行。（布局、绘制、JS执行都是在主线程中运行的）当在一帧的时间内布局和绘制结束后，还有剩余的时间JS就会拿到主线程的使用权，如果JS的执行时间过长，就会导致下一帧开始时JS依然没有执行结束（依然占用这主线程，也就是说JS执行可能会阻塞主线程），导致下一帧的动画没有按时渲染，就会出现页面的卡顿。</p> <p><img src="https://img-blog.csdnimg.cn/20200815122044108.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTIyMTAzNg==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p> <p>此时我们就可以使用<code>requestAnimationFrame</code>这个API来优化。</p> <p><code>requestAnimationFrame</code>这个方法会在每一帧开始时调用执行，在每一帧结束时回调（requestIdleCallback）：帮我们把JS运行任务分成一些更小的任务块（分到每一帧结束的位置），在每一帧时间用完前暂停JS运行任务，归还主线程，按时渲染下一帧</p> <p><img src="https://img-blog.csdnimg.cn/20200815123014691.png#pic_center" alt="在这里插入图片描述"></p> <h3 id="_7】事件流（事件冒泡、处于目标、捕获）"><a href="#_7】事件流（事件冒泡、处于目标、捕获）" class="header-anchor">#</a> 7】<a href="https://blog.csdn.net/chenjuan1993/article/details/81347590" target="_blank" rel="noopener noreferrer">事件流<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>（事件冒泡、处于目标、捕获）</h3> <p>DOM标准规定事件流包括三个阶段:<strong>事件捕获阶段、处于目标阶段、事件冒泡阶段</strong></p> <ul><li>当事件触发在<strong>目标阶段</strong>时，会根据事件注册（代码顺序）的先后顺序执行，在其他两个阶段（事件捕获阶段和事件冒泡阶段）注册顺序（代码顺序）不影响事件执行顺序。</li> <li>同时用addEventListener绑定的冒泡和捕获事件的元素， 哪个代码写在前面就先执行哪一个。其他元素通过冒泡或者捕获“感知”的事件，按照W3C的标准，先发生捕获事件，后发生冒泡事件。</li></ul> <p>addEventListener是DOM2级事件新增的指定事件处理程序的操作，这个方法接收3个参数：要处理的事件名，作为事件处理程序的函数和一个布尔值，最后这个布尔值如果是true，表示在捕获阶段调用事件处理程序；<strong>默认是false</strong>，表示在冒泡阶段调用事件处理程序。</p> <p><code>element.addEventListener(event, callback, useCapture)</code></p> <p>通过<code>e.stopPropagation()</code>阻止事件继续传递。</p> <p>通过<code>e.preventDefault()</code>阻止标签的默认行为。</p> <p><code>e.target</code>的值是<strong>用户行为触发事件</strong>的准确target目标</p> <p><code>e.currentTarget</code>的值是<strong>绑定事件监听函数</strong>的目标</p> <p>不是所有的事件都能冒泡，例如：<code>blur、focus、load、unload</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'冒泡div'</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>target<span class="token punctuation">,</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'捕获div'</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>target<span class="token punctuation">,</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'冒泡button'</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>target<span class="token punctuation">,</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'捕获button'</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>target<span class="token punctuation">,</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'冒泡domcument'</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>target<span class="token punctuation">,</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'捕获domcument'</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>target<span class="token punctuation">,</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
此时点击按钮，打印结果如下：
捕获domcument <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>​按钮​<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>  #document
捕获div       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>​按钮​<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>​…​<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
冒泡button    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>​按钮​<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>​按钮​<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
捕获button    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>​按钮​<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>​按钮​<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
冒泡div       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>​按钮​<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>​…​<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
冒泡domcument <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>​按钮​<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>  #document
</code></pre></div><h3 id="_8】事件委托"><a href="#_8】事件委托" class="header-anchor">#</a> 8】事件委托</h3> <p>事件委托本质上是利用了浏览器<strong>事件冒泡的机制</strong>。因为事件在冒泡过程中会上传到父节点，并且父节点可以通过事件对象获取到目标节点，因此可以把子节点的监听函数定义在父节点上，<strong>由父节点的监听函数统一处理多个子元素的事件</strong>，这种方式称为事件代理。</p> <ul><li>父元素监听点击事件，子元素触发点击，父元素使用<code>e.target</code>判断。</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>🍐<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>🍌<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>🍊<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>🥝<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">const</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span>
    ul<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token comment">//就不需要每一个子元素都获取然后去指定事件监听</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_9】js事件绑定方式"><a href="#_9】js事件绑定方式" class="header-anchor">#</a> 9】JS事件绑定方式</h3> <p>1】直接在标签属性绑定事件</p> <ul><li>需要在标签属性中<strong>立即执行绑定的函数</strong></li> <li>可以直接<code>return false;</code>进行<strong>阻止默认事件</strong>。</li> <li>没有event对象</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>clickone();return false;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> <span class="token comment">//直接在DOM里绑定事件,需要写成立即执行的格式</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
　　　function clickone(){ alert(&quot;hello&quot;); }
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>2】通过获取DOM绑定事件</p> <ul><li>在脚本中通过匿名函数的方式绑定的只会执行最后一个事件。</li> <li>也可以使用<code>return false;</code>进行<strong>阻止默认事件</strong>。也可以使用<code>e.preventDefault()</code></li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  document.getElementById(&quot;btn&quot;).onclick = function (){
    alert(&quot;hello&quot;);
    return false
  }
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>3】添加事件监听函数</p> <ul><li>用 &quot;addEventListener&quot; 可以绑定多次同一个事件，且都会执行，</li> <li>而在DOM结构如果绑定两个 &quot;onclick&quot; 事件，只会执行第一个；</li> <li>只能通过<code>e.preventDefault()</code>来<strong>阻止默认事件</strong>。</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  document.getElementById(&quot;btn&quot;).addeventlistener(&quot;click&quot;,(e)=&gt;{
    e.preventDefault()//阻止默认事件
    alert(&quot;hello&quot;)
  },false); 
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_10】base64"><a href="#_10】base64" class="header-anchor">#</a> 10】base64</h3> <p>一、图片转换成base64格式的优缺点</p> <ol><li>优点</li></ol> <p>（1）base64格式的图片是文本格式，占用内存小，转换后的大小比例大概为1/3，降低了资源服务器的消耗；</p> <p>（2）网页中使用base64格式的图片时，不用再请求服务器调用图片资源，减少了服务器访问次数。</p> <ol start="2"><li>缺点</li></ol> <p>（1）base64格式的文本内容较多，存储在数据库中增大了数据库服务器的压力；</p> <p>（2）网页加载图片虽然不用访问服务器了，但因为base64格式的内容太多，所以加载网页的速度会降低，可能会影响用户的体验。</p> <p>（3）base64无法缓存，要缓存只能缓存包含base64的文件，比如js或者css，这比直接缓存图片要差很多，而且一般HTML改动比较频繁，所以等同于得不到缓存效益。</p> <h3 id="_11】对iframe的了解"><a href="#_11】对iframe的了解" class="header-anchor">#</a> 11】对iframe的了解</h3> <ul><li>iframe是用来在网页中插入第三方页面，早期的页面使用iframe主要是用于导航栏这种很多页面都相同的部分，这样在切换页面的时候避免重复下载</li> <li>iframe的创建比一般的DOM元素慢了1-2个数量级</li> <li>iframe标签会阻塞页面的的加载</li></ul> <h5 id="局限："><a href="#局限：" class="header-anchor">#</a> 局限：</h5> <h6 id="_1、创建比一般的-dom-元素慢了-1-2-个数量级"><a href="#_1、创建比一般的-dom-元素慢了-1-2-个数量级" class="header-anchor">#</a> 1、创建比一般的 DOM 元素慢了 1-2 个数量级</h6> <p>iframe 的创建比其它包括 scripts 和 css 的 DOM 元素的创建慢了 1-2 个数量级，使用 iframe 的页面一般不会包含太多 iframe，所以创建 DOM 节点所花费的时间不会占很大的比重。但带来一些其它的问题：onload 事件以及连接池（connection pool）</p> <h6 id="_2、阻塞页面加载"><a href="#_2、阻塞页面加载" class="header-anchor">#</a> 2、阻塞页面加载</h6> <p>及时触发 window 的 onload 事件是非常重要的。onload 事件触发使浏览器的 “忙” 指示器停止，告诉用户当前网页已经加载完毕。当 onload 事件加载延迟后，它给用户的感觉就是这个网页非常慢。</p> <p>window 的 onload 事件需要在所有 iframe 加载完毕后（包含里面的元素）才会触发。在 Safari 和 Chrome 里，通过 JavaScript 动态设置 iframe 的 SRC 可以避免这种阻塞情况</p> <h6 id="_3、唯一的连接池"><a href="#_3、唯一的连接池" class="header-anchor">#</a> 3、唯一的连接池</h6> <p>浏览器只能开少量的连接到 web 服务器。比较老的浏览器，包含 Internet Explorer 6 &amp; 7 和 Firefox 2，只能对一个域名（hostname）同时打开两个连接。这个数量的限制在新版本的浏览器中有所提高。Safari 3+ 和 Opera 9+ 可同时对一个域名打开 4 个连接，Chrome 1+, IE 8 以及 Firefox 3 可以同时打开 6 个</p> <p>绝大部分浏览器，主页面和其中的 iframe 是共享这些连接的。这意味着 iframe 在加载资源时可能用光了所有的可用连接，从而阻塞了主页面资源的加载。如果 iframe 中的内容比主页面的内容更重要，这当然是很好的。但通常情况下，iframe 里的内容是没有主页面的内容重要的。这时 iframe 中用光了可用的连接就是不值得的了。一种解决办法是，在主页面上重要的元素加载完毕后，再动态设置 iframe 的 SRC。</p> <h6 id="_4、不利于-seo"><a href="#_4、不利于-seo" class="header-anchor">#</a> 4、不利于 SEO</h6> <p>搜索引擎的检索程序无法解读 iframe。另外，iframe 本身不是动态语言，样式和脚本都需要额外导入。综上，iframe 应谨慎使用。</p> <h3 id="_12】table标签"><a href="#_12】table标签" class="header-anchor">#</a> 12】<a href="https://www.w3school.com.cn/tags/tag_table.asp" target="_blank" rel="noopener noreferrer">table标签<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>可以在table标签中使用<code>&lt;tr&gt;&lt;/tr&gt;</code>（行）、<code>&lt;td&gt;&lt;/td&gt;</code>（列）</p> <p>table标签的属性有：</p> <ul><li>width：整个表格的宽度</li> <li>height：整个表格的高度</li> <li>border：整个表格<strong>边框</strong>的宽度</li> <li>align：（不赞成使用）规定表格相对周围元素的对齐方式</li> <li>cellpadding：单元<strong>边沿</strong>于<strong>内容</strong>之间的口间距（内边距）</li> <li>cellspacing：单元<strong>格</strong>之间的间距（外边距）</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- 行  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>Month<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- 表头  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>Savings<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>January<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- 普通列  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>$100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>td标签的属性有：</p> <ul><li>char：规定根据哪个字符来进行文本对齐。（character）</li> <li>align：单元格中内容的水平对齐方式（left、right、center、justify、char）</li> <li>valign：单元格内容的垂直对齐方式（top、middle、bottom、baseline）</li> <li>axis：对单元进行分类</li> <li>scope：定义将表头数据与单元数据相关联的方法（col、row、colgroup、rowgroup）</li></ul> <h3 id="_13】a标签的target属性"><a href="#_13】a标签的target属性" class="header-anchor">#</a> 13】a标签的target属性</h3> <p>href属性：去往的超链接路径（必填属性）</p> <p>target属性：</p> <ul><li><code>_self</code>：<strong>它是a标签的默认值</strong>，它使得目标文档载入并显示在相同的框架或者窗口中作为源文档。这个目标是多余且不必要的，除非和文档标题 <base> 标签中的 target 属性一起使用。</li> <li><code>_blank</code>：浏览器总在一个新打开、未命名的窗口中载入目标文档。</li> <li><code>_parent</code>：这个目标使得文档载入父窗口或者包含来超链接引用的框架的框架集。如果这个引用是在窗口或者在顶级框架中，那么它与目标 _self 等效。</li> <li><code>_top</code>：（<strong>一般也是在iframe页面中使用<code>_top</code></strong>）这个目标使得文档载入包含这个超链接的窗口，用 _top 目标将会<strong>清除所有被包含的框架并将文档载入整个浏览器窗口</strong>。</li> <li><em>framename</em>：在对应iframename的iframe框架中打开href超链接地址</li></ul> <p><a href="https://rayhomie.github.io/iframe_test/" target="_blank" rel="noopener noreferrer">点击查看效果<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h1 id="css"><a href="#css" class="header-anchor">#</a> CSS</h1> <h3 id="_1】flex布局"><a href="#_1】flex布局" class="header-anchor">#</a> 1】Flex布局</h3> <h5 id="容器的属性："><a href="#容器的属性：" class="header-anchor">#</a> 容器的属性：</h5> <ul><li><code>display:flex</code></li> <li><code>flex-direction</code>：决定主轴的方向（即项目的排列方向）。<strong>默认值row</strong> <ul><li>值：<code>row | row-reverse | column | column-reverse;</code></li></ul></li> <li><code>flex-wrap</code>：如果一条轴线排不下，如何换行。<strong>默认值nowrap</strong> <ul><li>值：<code>nowrap | wrap | wrap-reverse;</code></li></ul></li> <li><code>flex-flow</code>：<code>flex-direction</code>属性和<code>flex-wrap</code>属性的简写形式，<strong>默认值为row nowrap</strong></li> <li><code>justify-content</code>：定义项目在主轴上的对齐方式。<strong>默认值flex-start左对齐</strong> <ul><li>值：<code>flex-start | flex-end | center | space-between | space-around | space-evenly;</code></li></ul></li> <li><code>align-items</code>：定义项目在交叉轴上如何对齐。<strong>默认值stretch</strong>（如果项目未设置高度或设为auto，将占满整个容器的高度。）
<ul><li>值：<code>flex-start | flex-end | center | baseline | stretch;</code></li></ul></li> <li><code>align-content</code>：定义了多根轴线的对齐方式。如果项目<strong>只有一根轴线，该属性不起作用</strong>。<strong>默认值stretch</strong> <ul><li>值：<code>flex-start | flex-end | center | space-between | space-around | stretch;</code></li></ul></li></ul> <h5 id="项目的属性："><a href="#项目的属性：" class="header-anchor">#</a> 项目的属性：</h5> <ul><li><code>flex</code>：<code>flex-grow</code>, <code>flex-shrink</code> 和 <code>flex-basis</code>的简写，<strong>默认值为0 1 auto</strong>。后两个属性可选。该属性有两个快捷值：<strong>auto (1 1 auto)</strong> 和 <strong>none (0 0 auto)</strong>。
<ul><li>flex: 1; === flex: 1 1 任意数字+任意长度单位;</li> <li>flex: 1; !== flex:1 1 auto;</li></ul></li> <li><code>flex-grow</code>：定义项目的放大比例，<strong>默认为0</strong>（<strong>即如果存在剩余空间，也不放大</strong>）
<ul><li>值： <code>&lt;number&gt;</code> <ul><li>如果所有项目的<code>flex-grow</code>属性都为1，则它们将等分<strong>剩余</strong>空间（如果有的话）。如果一个项目的<code>flex-grow</code>属性为2，其他项目都为1，则前者占据的剩余空间将比其他项多一倍。</li></ul></li></ul></li> <li><code>flex-shrink</code>：定义了项目的缩小比例，<strong>默认为1</strong>（<strong>即如果空间不足，该项目将缩小</strong>）
<ul><li>值： <code>&lt;number&gt;</code> <ul><li>如果所有项目的<code>flex-shrink</code>属性都为1，当空间不足时，都将等比例缩小。如果一个项目的<code>flex-shrink</code>属性为0，其他项目都为1，则空间不足时，前者不缩小。</li></ul></li></ul></li> <li><code>flex-basis</code>：定义了在分配多余空间之前，项目占据的主轴空间。浏览器根据这个属性，计算主轴是否有多余空间。它的<strong>默认值为auto</strong>，即项目的本来大小。</li></ul> <h3 id="_2】bfc"><a href="#_2】bfc" class="header-anchor">#</a> 2】BFC</h3> <p><code>BFC</code>：<code>Block Formatting Context</code>（<strong>块级格式化上下文</strong>）</p> <p>只需要记住，<code>BFC</code>的<strong>目的</strong>就是：<strong>形成一个完全独立的空间，让空间中的子元素不会影响到外面的布局</strong>。</p> <p>我们通过为元素设置一些<code>CSS</code>属性，就能触发这一空间。以下是<strong>四种最为常见的触发规则</strong>：</p> <ul><li><code>float</code>不为<code>none</code></li> <li><code>overflow</code>的值不为<code>visible</code></li> <li><code>position</code>不为<code>relative</code>和<code>static</code></li> <li><code>display</code>的值为<code>table-cell</code>或<code>inline-block</code></li></ul> <p>BFC的布局规则：</p> <ul><li>内部的Box会在垂直方向，一个接一个地放置。</li> <li>Box垂直方向的距离由margin决定。属于<strong>同一个</strong>BFC的两个相邻Box的margin会发生重叠。</li> <li>每个盒子（块盒与行盒）的margin box的左边，与包含块border box的左边相接触(对于从左往右的格式化，否则相反)。即使存在浮动也是如此。</li> <li>BFC的区域不会与float box重叠。</li> <li>BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素。反之也如此。</li> <li>计算BFC的高度时，浮动元素也参与计算。</li></ul> <div class="language-css extra-class"><pre class="language-css"><code>普通文档流布局规则
1.浮动的元素是不会被父级计算高度
2.非浮动元素会覆盖浮动元素的位置
3.margin会传递给父级
4.两个相邻元素上下margin会重叠
BFC布局规则
1.浮动的元素会被父级计算高度（父级触发了BFC）
2.非浮动元素不会覆盖浮动元素位置（非浮动元素触发了BFC）
3.margin不会传递给父级（父级触发了BFC）
4.两个相邻元素上下margin会重叠（给其中一个元素增加一个父级，然后让他的父级触发BFC）
</code></pre></div><h3 id="_3】清除浮动"><a href="#_3】清除浮动" class="header-anchor">#</a> 3】清除浮动</h3> <p>浮动的元素<strong>脱离文档流</strong>，之前占用<strong>空间会释放</strong>，影响正常文档流的元素位置。在<strong>受到浮动影响其位置</strong>的元素上面使用<code>clear:both</code>来使<strong>浮动元素</strong>回归文档流。</p> <p>①在浮动元素所在容器内的最后添加空标签<code>clear:both</code></p> <p>②在浮动元素所在容器上面使用<code>::after</code>伪元素<code>content:'';display:block;clear:both</code></p> <p>③在浮动元素所在容器上使用<code>overflow:auto/hidden/scroll</code>，创建BFC包住浮动的元素。（因为容器没有设置高度，BFC布局中，<strong>容器会包含住所有内部元素</strong>）</p> <h3 id="_4】-before-after"><a href="#_4】-before-after" class="header-anchor">#</a> 4】<code>::before&amp;::after</code></h3> <p>CSS中，<code>::before</code> 创建一个伪元素，其将成为匹配选中的元素的第一个子元素。常通过<code>content</code>属性来为一个元素添加修饰性的内容。此元素默认为行内元素。由<code>::before</code> 和<code>::after</code> 生成的伪元素包含在元素格式框内（相当于就是此元素的子元素）。</p> <h3 id="_5】ifc"><a href="#_5】ifc" class="header-anchor">#</a> 5】IFC</h3> <p>Inline Formatting Contexts，也就是“内联格式化上下文”。</p> <h4 id="符合以下任一条件即会生成一个ifc："><a href="#符合以下任一条件即会生成一个ifc：" class="header-anchor">#</a> 符合以下任一条件即会生成一个IFC：</h4> <ul><li>块级元素中仅包含内联级别元素</li></ul> <h4 id="ifc布局规则："><a href="#ifc布局规则：" class="header-anchor">#</a> IFC布局规则：</h4> <ul><li>子元素<strong>水平方向横向排列</strong>，并且垂直方向起点为元素顶部。</li> <li>子元素<strong>只会计算横向样式空间</strong>，【padding、border、margin】，垂直方向样式空间不会被计算，【padding、border、margin】。</li> <li>在垂直方向上，子元素会以不同形式来对齐（<strong>vertical-align</strong>）、水平方向（<strong>text-align</strong>）</li> <li>IFC中的“line box”一般左右边贴紧其包含块，但<strong>float元素会优先排列</strong>。</li></ul> <h3 id="_6】层叠上下文"><a href="#_6】层叠上下文" class="header-anchor">#</a> 6】<a href="https://developer.cdn.mozilla.net/zh-CN/docs/Web/Guide/CSS/Understanding_z_index/The_stacking_context" target="_blank" rel="noopener noreferrer">层叠上下文<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>某些元素的渲染顺序是由其 <code>z-index</code> 的值影响的。这是因为这些元素具有能够使他们形成一个<em>层叠上下文</em>的特殊属性。</p> <p>形成层叠上下文的条件：</p> <ul><li>文档根元素（<code>&lt;html&gt;</code>）</li> <li><code>position</code>值为 <code>absolute</code>或 <code>relative</code>且<code>z-index</code>值不为 <code>auto</code> 的元素</li> <li><code>position</code>值为 <code>fixed</code>或 <code>sticky</code>（粘滞定位）的元素</li> <li>flex(<code>flexbox</code>)容器的子元素，且<code>z-index</code>值不为<code>auto</code></li> <li>grid(<code>grid</code>)容器的子元素，且<code>z-index</code>值不为<code>auto</code></li> <li><code>opacity</code>属性值小于 <code>1</code> 的元素(在最下面的层叠上下文)</li> <li>以下任意属性值不为 <code>none</code> 的元素：(在最下面的层叠上下文)
<ul><li><code>transform</code></li> <li><code>filter</code></li></ul></li></ul> <p>两大原则：谁大谁上，后来居上</p> <p>bottom装饰----&gt;布局---&gt;内容top</p> <p><img src="https://img-blog.csdnimg.cn/20200815223603549.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTIyMTAzNg==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p> <p><img src="https://img-blog.csdnimg.cn/20200815224306307.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTIyMTAzNg==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"> <img src="https://img-blog.csdnimg.cn/20200815224343144.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTIyMTAzNg==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p> <h3 id="_7】盒子模型"><a href="#_7】盒子模型" class="header-anchor">#</a> 7】盒子模型</h3> <p>①标准盒子模型</p> <p><code>box-sizing: content-box;</code>默认</p> <p>标准盒模型中width指的是内容区域content的宽度；height指的是内容区域content的高度。</p> <p><strong>标准盒模型下盒子的大小 = content + border + padding + margin</strong></p> <p>②怪异盒子模型（更方便）</p> <p><code>box-sizing: border-box;</code></p> <p>怪异盒模型中的width指的是内容、边框、内边距总的宽度（content + border + padding）；height指的是内容、边框、内边距总的高度。</p> <p><strong>怪异盒模型下盒子的大小=width（content + border + padding） + margin</strong></p> <h4 id="拓展延伸：javascript中的offsetwidth、clientwidth"><a href="#拓展延伸：javascript中的offsetwidth、clientwidth" class="header-anchor">#</a> 拓展延伸：javascript中的offsetWidth、clientWidth</h4> <p>以下都是基于标准盒子模型</p> <p>clientWidth = width + 左右padding</p> <p>offsetWidth = width + 左右padding + 左右boder</p> <h3 id="_8】瀑布流布局"><a href="#_8】瀑布流布局" class="header-anchor">#</a> 8】瀑布流布局</h3> <h4 id="①column多列属性"><a href="#①column多列属性" class="header-anchor">#</a> ①column多列属性</h4> <div class="language-js extra-class"><pre class="language-js"><code>一个是 column<span class="token operator">-</span>count 属性，是分为多少列。
一个是 column<span class="token operator">-</span>gap 属性，是设置列与列之间的距离
</code></pre></div><h4 id="②js实现瀑布流"><a href="#②js实现瀑布流" class="header-anchor">#</a> ②JS实现瀑布流</h4> <p>瀑布流布局的特点是等宽不等高。（使用一个定长度数组来存）</p> <p>父元素设置为相对定位，图片所在元素设置为绝对定位。然后通过设置<code>top</code>值和<code>left</code>值定位每个元素。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">img</span><span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span>absolute<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span>上一排中最小索引值*图片固定宽度 px<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span>最小图片的高度，叠加<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
用一个数组来存放每一排的图片高度，假如是一排四列图片[100<span class="token punctuation">,</span>80<span class="token punctuation">,</span>120<span class="token punctuation">,</span>150]<span class="token punctuation">,</span>然后不断叠加
</code></pre></div><p>用获取屏幕的宽度/每张图片宽度=列数。</p> <h4 id="③flex弹性布局"><a href="#③flex弹性布局" class="header-anchor">#</a> ③flex弹性布局</h4> <p><code>flex-flow:column wrap</code>纵向排列，换行</p> <p>缺点：需要固定外部容器的高度。</p> <h3 id="_9】css选择器优先级"><a href="#_9】css选择器优先级" class="header-anchor">#</a> 9】css选择器优先级</h3> <ul><li><p>越具体优先级越高</p></li> <li><p>一样选择器，代码顺序写在后面的覆盖前面的</p></li> <li><p><code>important!</code>最高、少用（优先级比行内样式还要高）</p></li> <li><p>行内样式*1000</p></li> <li><p>ID选择器数量 * 100</p></li> <li><p>类、属性、伪类选择器数量 * 10</p></li> <li><p>元素、伪元素选择器数量 * 1</p></li></ul> <h3 id="_10】css属性继承"><a href="#_10】css属性继承" class="header-anchor">#</a> 10】css属性继承</h3> <ul><li>字体样式可继承</li> <li>盒子样式不可继承</li></ul> <h3 id="_11】css-reset-和-normalize-css-有什么区别？"><a href="#_11】css-reset-和-normalize-css-有什么区别？" class="header-anchor">#</a> 11】css reset 和 normalize.css 有什么区别？</h3> <ul><li>考英文：
<ul><li>reset 重置，之前的样式我不要，a{color: red;}，<strong>抛弃默认样式</strong></li> <li>normalize 让所有浏览器的标签都跟标准规定的默认样式一致，各浏览器上的标签默认样式基本统一。（<strong>保留有价值的默认样式</strong>）</li></ul></li></ul> <h3 id="_12】position：sticky"><a href="#_12】position：sticky" class="header-anchor">#</a> 12】position：sticky</h3> <p><code>position:sticky</code>是一个新的css3属性，它的表现类似<code>position:relative</code>和<code>position:fixed</code> 的合体，当目标区域在屏幕中可见时，它的行为就像<code>position:relative</code>；当页面滚动超出目标区域时，它的表现就像<code>position:fixed</code>，它会固定在目标位置。（注意：top和left优先级分别大于bottom和right）</p> <p><img src="https://img-blog.csdnimg.cn/20200904084329728.gif#pic_center" alt="在这里插入图片描述"></p> <p>原生实现：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">.header</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span> #f6d565<span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 25px 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.sticky</span> <span class="token punctuation">{</span>
        <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">='</span><span class="token attr-value"><span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span></span><span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">='</span><span class="token attr-value"><span class="token property">height</span><span class="token punctuation">:</span> 1000px<span class="token punctuation">;</span></span><span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> header <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.header'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> originOffsetY <span class="token operator">=</span> header<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span><span class="token comment">//获取该元素初始的距父元素顶部的高度</span>
    <span class="token keyword">function</span> <span class="token function">onScroll</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        window<span class="token punctuation">.</span>scrollY <span class="token operator">&gt;=</span> originOffsetY<span class="token comment">//屏幕顶部到页面顶部的距离大于获取的原始值</span>
            <span class="token operator">?</span> header<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'sticky'</span><span class="token punctuation">)</span>
            <span class="token operator">:</span> header<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'sticky'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> onScroll<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="https://img-blog.csdnimg.cn/20200904084415345.gif#pic_center" alt="在这里插入图片描述"></p> <h1 id="javascript"><a href="#javascript" class="header-anchor">#</a> JAVASCRIPT</h1> <h3 id="_1】ajax和xhr和fetch"><a href="#_1】ajax和xhr和fetch" class="header-anchor">#</a> 1】AJAX和xhr和fetch</h3> <p>Asynchronous JavaScript and XML（异步js和xml）</p> <p>（严格依赖于XMLHttpRequest对象）</p> <p>xhr对象的属性：</p> <ul><li>readyState：请求状态
<ul><li>只有状态4是请求完毕，记住</li></ul></li> <li>status：响应状态
<ul><li>status表示HTTP响应中的状态码，200才是响应成功</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>xmlHttpRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xmlHttpRequest<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>提交方式<span class="token keyword">get</span><span class="token operator">/</span>post<span class="token punctuation">,</span>服务器地址url<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xmlHttpRequest<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置请求头</span>
xmlHttpRequest<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;mobile=&quot;</span><span class="token operator">+</span>mobile<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//post请求key=value的形式，get请求传null值</span>
xmlHttpRequest<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>xmlHttpRequest<span class="token punctuation">.</span>readyState <span class="token operator">==</span><span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xmlHttpRequest<span class="token punctuation">.</span>status <span class="token operator">==</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> xmlHttpRequest<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注意：<code>content-Type:application/x-www-form-urlencoded</code>和<code>content-Type:multipart/form-data</code>只是post请求在请求体body中数据的两种编码方式。一种支持上传文件，一种不支持。</p> <p>post参数格式：</p> <ul><li>form-data(multipart/form-data)：可传文件</li> <li>x-www-form-urlencoded(application/x-www-form-urlencoded)：&quot;key1=val1&amp;key2=val2&quot;</li> <li>raw(application/json)：json字符串</li> <li>text/plain：普通字符串</li></ul> <h4 id="fetch特点"><a href="#fetch特点" class="header-anchor">#</a> Fetch特点</h4> <ul><li>不是基于xhr对象的，而是原生js。</li> <li>并且基于标准Promise来实现，支持 async/await。</li> <li>比xhr的语法简洁，更加语义化</li> <li>Fetch API 提供了<strong>访问数据的文件流</strong>实际字节的方法，而 XHR 的 responseText 只有<strong>文本形式</strong>。</li> <li>fetch需要自己封装处理状态码，它内部只能判断服务器是否响应</li></ul> <h3 id="_2】axios、umi-request"><a href="#_2】axios、umi-request" class="header-anchor">#</a> 2】Axios、umi-request</h3> <p>Axios的优点：</p> <ul><li>在浏览器中发送XMLHTTPRequests请求</li> <li>在node.js中发送http请求</li> <li><strong>支持Promise API</strong></li> <li><strong>拦截请求和响应</strong> <ul><li>请求拦截：带上token、加载图标显示</li> <li>响应拦截：判断状态码、未登录、token过期、加载图标关闭</li></ul></li> <li>转换请求和响应数据</li> <li>等等</li></ul> <p>umi-request：</p> <p>umi-request 是基于 fetch 的封装，兼具 fetch 和 axios 的特点。</p> <h3 id="_3】promise"><a href="#_3】promise" class="header-anchor">#</a> 3】Promise</h3> <p>基于回调，解决回调地狱</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//Promise基本使用</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//成功的时候调用resolve，传入结果</span>
		<span class="token comment">//resolve('hello')</span>
    <span class="token comment">//失败的时候调用reject，传入结果</span>
    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'error message'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//then里面处理成功，此时打印hello</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">//catch里面处理失败，此时打印error message</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>三种状态</strong>：pending（等待态）、fulfilled（满足态）、rejected（拒绝态）</p> <p><strong>链式调用</strong>：<code>.then()</code> 中返回一个新promise对象来形成链式调用。</p> <ul><li>如果<code>.then()</code>不返回值，即默认<code>return undefined</code>，作为回调参数传递给下一个<code>.then(d=&gt;d)</code></li> <li>如果<code>.then()</code>返回普通值，将会把这个普通值作为回调参数传递给下一次<code>.then(d=&gt;d)</code></li></ul> <p><strong>触发执行.catch()失败</strong>：①返回一个<code>reject()</code>的Promise对象，②抛出异常错误</p> <p><strong>触发执行.then()成功</strong>：①返回一个<code>resolve()</code>的Promise对象，②返回一个普通值，这个普通值直接传递给下一个<code>then()</code>，③不显式返回值，将<code>undefined</code>传给下一个<code>then()</code></p> <p><strong>常用API</strong>：</p> <ul><li><code>Promise.resolve()</code> <ul><li>传入的参数是一个普通值，就可以把普通对象转换成Promise对象。</li> <li>传入的参数是一个Promise对象，则会等待这个Promise对象执行完后再继续执行。</li></ul></li> <li><code>Promise.reject()</code> <ul><li>同上</li></ul></li> <li><code>Promise.all()</code> <ul><li><strong>并发执行，但是有序地得到结果，返回一个promise对象</strong>。</li> <li>传入的数组中的参数<code>[p1,p2,...,pn]</code>，都会调用<code>Promise.resolve()</code>来<strong>转成Promise对象类型</strong>。</li> <li>而且<code>Promise.race()</code>自身返回的也是Promise对象。</li> <li>该方法的参数不一定是数组，但<strong>必须具有 Iterator 接口</strong>，且执行返回的每个成员都是 Promise 实例。</li> <li>全真才真，一假全假。</li> <li><strong>必须使用计数器</strong>来底层实现。（因为是异步的，<strong>加入微任务队列</strong>）</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function-variable function">all</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>promises<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'You must pass array'</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                res<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> data
                index<span class="token operator">++</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//必须在Promise异步中判断</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">r</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//[ 1, 2, 3, 4 ]</span>
</code></pre></div><ul><li><code>Promise.race()</code> <ul><li>传入的参数和上面<code>Promise.all()</code>一致</li> <li>依然会把数组中的中的所有对象，使用<code>Promise.resolve()</code>转为Promise对象。</li> <li>而且<code>Promise.race()</code>自身返回的也是Promise对象。</li> <li>下面代码中，只要<code>p1</code>、<code>p2</code>、...、<code>pn</code>之中<strong>有一个实例率先改变状态</strong>，<code>p</code>的状态就跟着改变。<strong>那个率先改变的 Promise 实例的返回值，就传递给<code>p</code>的回调函数（<code>then</code> or <code>catch</code>）</strong>。</li> <li>一变就跳出</li></ul></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span><span class="token operator">...</span><span class="token punctuation">,</span> pn<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token operator">=&gt;</span>data<span class="token punctuation">)</span><span class="token comment">//data为率先改变状态的返回值。</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function-variable function">race</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'You must pass array'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">r<span class="token punctuation">,</span> j</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">r</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">r<span class="token punctuation">,</span> j</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">j</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">r</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><ul><li><code>Promise.prototype.finally()</code> <ul><li>该方法的回调函数<strong>不接受任何参数</strong></li> <li>该方法写出来就必然会执行，与状态无关，不依赖于Promise的执行结果</li> <li><code>Promise.finally()</code>可以看似于特殊的<code>Promise.then()</code>方法，也会返回一个 Promise 对象<strong>用于传递上一个Promise的结果</strong>。</li> <li>一般用于拦截</li></ul></li></ul> <h3 id="_4】iterator"><a href="#_4】iterator" class="header-anchor">#</a> 4】Iterator</h3> <p>比如<strong>Map</strong>、<strong>Set</strong>、<strong>Array数组</strong>、<strong>String</strong>、<strong>generator函数</strong>、<strong>arrayLike类似数组的对象(但是必须要添加迭代的功能)</strong>、TypedArray等（需要非常注意的是<strong>对象是没有迭代器接口</strong>，需要手动添加迭代器功能，或者转换成数组来进行迭代）</p> <ul><li>只要具有迭代器接口的类型都可以使用<code>[...It]</code>或<code>Array.from(It)</code>强转成数组类型。</li> <li><code>Array.prototype.slice.call(arrayLike)</code>只能把类数组对象转为数组，不能把迭代器对象转成数组</li></ul> <p>上面提到的数组、Map、Set等都是这样使用<code>[Symbol.iterator]</code>包装的迭代器</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> string <span class="token operator">=</span> <span class="token string">'我是雷浩'</span>
<span class="token keyword">let</span> it1<span class="token operator">=</span> string<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> it2<span class="token operator">=</span> string<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> string<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//实际上也是调用了string中的Symbol.iterator方法</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token comment">//依次打印：我 是 雷 浩</span>
<span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> it1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token comment">//依次打印：我 是 雷 浩</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it2<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token comment">//我</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it2<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token comment">//是</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it2<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token comment">//雷</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it2<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token comment">//浩</span>
</code></pre></div><p>实现一个对象迭代器：（<strong>使用计数器</strong>）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'雷浩'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
  address<span class="token operator">:</span> <span class="token string">'四川成都'</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> key <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span>
    <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          value<span class="token operator">:</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">?</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
          done<span class="token operator">:</span> index<span class="token operator">++</span> <span class="token operator">&lt;</span> key<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> it <span class="token operator">=</span> obj<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//{ value: '雷浩', done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//{ value: 21, done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//{ value: '四川成都', done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//{ value: undefined, done: true }</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token comment">//依次打印：雷浩 21 四川成都</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Generator包装一个迭代器：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;XX&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    job<span class="token operator">:</span> <span class="token string">'teacher'</span><span class="token punctuation">,</span>
    <span class="token operator">*</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>index <span class="token operator">&lt;</span> keys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">yield</span> self<span class="token punctuation">[</span>keys<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_5】generator"><a href="#_5】generator" class="header-anchor">#</a> 5】Generator</h3> <p>generator（生成器）执行之后返回生产一个 Iterator（迭代器）</p> <ul><li><p><code>yield</code>关键字必须放在带<code>*</code>指针的生成器函数里面用。</p></li> <li><p><code>Iterator.next(param)</code>接收一个参数，传入的实参会传递给上一次yield的返回值。</p></li> <li><p>在generator生产器函数中支持<code>yield* Iterator</code>的用法。</p> <ul><li><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">1</span>
  <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token string">'LH'</span><span class="token comment">//yield后面带*号，该值会被继续迭代</span>
  <span class="token keyword">yield</span> <span class="token number">2</span>
  <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token string">'LLY'</span><span class="token comment">//字符串是具备迭代器接口的</span>
<span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//执行generator函数返回一个迭代器</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">//依次打印：1 L H 2 L L Y</span>
</code></pre></div></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//一遇到yeild然后执行yeild后面的值，执行完毕就暂停</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> a  <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token string">'hello'</span><span class="token punctuation">;</span><span class="token comment">//先执行yield之后立即暂停，所以并没有给a赋值</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//undefined</span>
  <span class="token keyword">let</span> b  <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token string">'world'</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//undefined</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> it <span class="token operator">=</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//{ value: 'hello', done: false } undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//{ value: 'world', done: false } undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//{ value: undefined, done: true }</span>
</code></pre></div><p><img src="https://img-blog.csdnimg.cn/20200804175512801.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTIyMTAzNg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <p>使用Generator yield实现async await：</p> <p>async await ==语法糖=&gt; generator yield +<a href="https://github.com/tj/co" target="_blank" rel="noopener noreferrer">co<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>(大神tj写的一个nodejs库)</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">event</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> one <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> two <span class="token operator">=</span> <span class="token keyword">yield</span> one<span class="token operator">+</span><span class="token number">1</span>
  <span class="token keyword">const</span> three <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">resolve</span><span class="token punctuation">(</span>two<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> it <span class="token operator">=</span> <span class="token function">event</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> value<span class="token punctuation">,</span> done <span class="token punctuation">}</span> <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token comment">//1</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span> value<span class="token punctuation">,</span> done <span class="token punctuation">}</span> <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token comment">//2</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> value<span class="token punctuation">,</span> done <span class="token punctuation">}</span> <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token comment">//3</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_6】asyncgenerator"><a href="#_6】asyncgenerator" class="header-anchor">#</a> 6】AsyncGenerator</h3> <p><a href="https://www.jianshu.com/p/4fa2091c9506" target="_blank" rel="noopener noreferrer">Async Generator Functions in JavaScript<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>总结：记住使用异步迭代器调用next函数之后获得的结果是以Promise的形式进行返回</strong>。</p> <p>异步生成器函数是特别的，因为你可以在<strong>函数中同时使用await 和 yield</strong>， 异步生成器函数不同于异步函数和生成器函数，因为它不会返回promise或者iterator，而是返回异步迭代器，你可以把异步迭代器作为一个**<code>next()</code>函数总是返回一个promise的迭代器**。</p> <p>例子：</p> <p>异步迭代器函数行为与迭代器函数相似，迭代器函数返回一个有next函数的对象，调用<code>next()</code>将执行generator函数，直到下一个yield。<strong>不同的是，异步迭代器的<code>next()</code>返回一个promise</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token string">'Hello'</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'World'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// `run()` returns an async iterator.</span>
<span class="token comment">// 执行异步生成器生成异步迭代器</span>
<span class="token keyword">const</span> asyncIterator <span class="token operator">=</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// The function doesn't start running until you call `next()`</span>
<span class="token comment">// 异步迭代器调用next函数，得到第一个yield后面跟的结果，并以Promise形式返回。</span>
asyncIterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
  <span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">obj</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span> <span class="token comment">// Prints &quot;Hello&quot;</span>
  <span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> asyncIterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Prints &quot;World&quot;</span>
</code></pre></div><p>最干净的方法是使用<code>for/await/of</code>循环整个异步迭代器函数：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token string">'Hello'</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'World'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> asyncIterator <span class="token operator">=</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//生成异步迭代器</span>

<span class="token comment">// Prints &quot;Hello\nWorld&quot;</span>
<span class="token comment">//使用async、await、for：循环一步等待一步</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> val <span class="token keyword">of</span> asyncIterator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Prints &quot;Hello&quot;（val是yield后的结果以Promise形式返回，所以需要await去获取它的值）</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_7】async-await"><a href="#_7】async-await" class="header-anchor">#</a> 7】async await</h3> <ul><li><code>async</code>函数返回一个 Promise 对象，可以使用<code>then</code>方法添加回调函数。</li> <li><code>async</code>函数内部<code>return</code>语句返回的值，会成为<code>then</code>方法回调函数的参数。</li> <li><code>await</code>后面的值会被<strong>强转</strong>成Promise对象</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">event</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> one <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1</span>
  <span class="token keyword">const</span> two <span class="token operator">=</span> <span class="token keyword">await</span> one <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">//2</span>
  <span class="token keyword">const</span> three <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">resolve</span><span class="token punctuation">(</span>two <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//3</span>
  <span class="token keyword">return</span> three
<span class="token punctuation">}</span>
<span class="token function">event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//Promise { &lt;pending&gt; }</span>
</code></pre></div><p>原生async await=co+generator yield</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> content <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token number">1</span>
  <span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token number">2</span>
  <span class="token keyword">return</span> r<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">co</span><span class="token punctuation">(</span><span class="token parameter">it</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">exec</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">let</span> <span class="token punctuation">{</span>value<span class="token punctuation">,</span>done<span class="token punctuation">}</span> <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>done<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//如果done一直是flase</span>
        Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token comment">//yield的后面可能是普通值，需要强转</span>
          <span class="token function">exec</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token comment">//递归</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>reject<span class="token punctuation">)</span><span class="token comment">//出错就跳出</span>
      <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token comment">//停止执行，返回的promse的对象调用.then()获取值</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//第一次执行</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">co</span><span class="token punctuation">(</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token comment">//2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_8】map"><a href="#_8】map" class="header-anchor">#</a> 8】Map</h3> <p>键的类型：</p> <ul><li>JS对象中的键只能是<strong>字符串</strong>或者Symbol的形式</li> <li>Map中的键可以是<strong>任意值</strong>。</li></ul> <p>键的顺序：</p> <ul><li>JS对象中的键<strong>无序的</strong>。</li> <li>Map中的键是<strong>有序的</strong>，顺序是按照插入的顺序来记录。因此，当迭代的时候，一个 <code>Map</code> 对象以插入的顺序返回键值。</li></ul> <p>Size：</p> <ul><li>JS对象中的键值对个数只能手动计算</li> <li>Map中的键值对个数可以轻易地通过size属性获取</li></ul> <p>迭代：</p> <ul><li>JS对象需要以某种方式<strong>获取它的键</strong>，或者手动<strong>添加迭代器接口</strong>然后才能迭代。</li> <li>Map默认具有迭代器接口，所以可以<strong>直接</strong>被迭代。</li></ul> <p>Map的方法简单使用：</p> <ul><li>先new的时候，可以向构造函数中传入<code>[[k,v],[k,v]]</code>的数组类型参数</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'two'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> n<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> a<span class="token operator">=</span>m<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token string">'content'</span><span class="token punctuation">)</span><span class="token comment">//执行并返回Map</span>
<span class="token keyword">let</span> b<span class="token operator">=</span>m<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token comment">//返回传入键所对应的值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token comment">//Map { 'one' =&gt; 1, 'two' =&gt; 2, [ 1, 2 ] =&gt; 'content' }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token comment">//content</span>
m<span class="token punctuation">.</span>size<span class="token comment">//3</span>
m<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token comment">//true</span>
m<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token comment">//true</span>
m<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token comment">//false</span>
m<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//清除所有成员，没有返回值。</span>
</code></pre></div><p>Map 结构的实例有<strong>三个迭代器生成函数和一个遍历方法</strong></p> <ul><li><code>Map.prototype.keys()</code>：返回<strong>键名</strong>的迭代器。
<ul><li>JS对象<code>Object.keys(obj)</code>：直接返回一个数组存放所有key。</li></ul></li> <li><code>Map.prototype.values()</code>：返回<strong>键值</strong>的迭代器。
<ul><li>JS对象<code>Object.values(obj)</code>：直接返回一个数组存放所有value。</li></ul></li> <li><code>Map.prototype.entries()</code>：返回<strong>所有成员</strong>的迭代器。
<ul><li>等同于使用<code>map[Symbol.iterator]</code> <ul><li>JS对象并没有迭代功能</li></ul></li></ul></li> <li><code>Map.prototype.forEach()</code>：遍历 Map 的所有成员。
<ul><li><code>map.forEach((value,key,self)=&gt;{...})</code></li></ul></li></ul> <p>注意：以下三种迭代方式一样的</p> <p>Map 结构的默认遍历器接口（<code>Symbol.iterator</code>属性），就是<code>entries</code>方法。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>map<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">===</span> map<span class="token punctuation">.</span>entries
<span class="token comment">// true</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> map<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> item<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// &quot;F&quot; &quot;no&quot;</span>
<span class="token comment">// &quot;T&quot; &quot;yes&quot;</span>

<span class="token comment">// 或者</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> map<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// &quot;F&quot; &quot;no&quot;</span>
<span class="token comment">// &quot;T&quot; &quot;yes&quot;</span>

<span class="token comment">// 等同于使用map.entries()</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> map<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// &quot;F&quot; &quot;no&quot;</span>
<span class="token comment">// &quot;T&quot; &quot;yes&quot;</span>
</code></pre></div><h4 id="weakmap："><a href="#weakmap：" class="header-anchor">#</a> WeakMap：</h4> <p><code>WeakMap</code><strong>只接受对象作为键名</strong>（<code>null</code>除外），不接受其他类型的值作为键名。</p> <p>WeakMap中的<strong>键名</strong>是对象的弱引用（注意：WeakMap 弱引用的<strong>只是键名</strong>，而不是键值。<strong>键值依然是正常引用</strong>）。</p> <p>只要WeakMap中键名引用的对象，虽然是被WeakMap引用了，但是依然会被垃圾回收掉，因为这是<strong>弱引用</strong>。（并不影响引用的那个对象被垃圾回收掉）</p> <p><strong>无法遍历</strong>，不支持<code>keys()</code>、<code>values()</code>和<code>entries()</code>方法，也没有<code>size</code>属性。</p> <h3 id="_9】set"><a href="#_9】set" class="header-anchor">#</a> 9】Set</h3> <p>Set集合类似于数组，但是成员的值都是唯一的，<strong>没有重复</strong>。</p> <p>Set的基本使用：</p> <ul><li><code>Set</code>的构造函数可以接受一个数组（或者具有 iterable 接口的其他数据结构）作为参数，用来初始化。
<ul><li><code>let set = new Set([1,2,3,4]);</code></li></ul></li> <li>把<code>Set</code>强转成数组：
<ul><li><code>let arr=[...set]</code></li> <li><code>let arr=Array.from(set)</code></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token keyword">set</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token comment">//执行并返回修改后的结果</span>
<span class="token comment">// Set { 1, 2, 3 }</span>

<span class="token keyword">set</span><span class="token punctuation">.</span>size <span class="token comment">// 3</span>
<span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
<span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 清除所有成员，没有返回值。</span>
</code></pre></div><p>Set 结构的实例有<strong>三个迭代器生成函数</strong>和<strong>一个遍历方法</strong>，可以用于遍历成员。</p> <ul><li><code>Set.prototype.keys()</code>：返回<strong>键名</strong>的迭代器</li> <li><code>Set.prototype.values()</code>：返回<strong>键值</strong>的迭代器</li> <li><code>Set.prototype.entries()</code>：返回<strong>键值对</strong>的迭代器</li> <li><code>Set.prototype.forEach()</code>：使用回调函数遍历每个成员
<ul><li><code>set.forEach((value,key,self)=&gt;{...})</code></li></ul></li></ul> <p><strong>数组Array、集合Set、表Map都具有迭代器生产方法和遍历方法</strong>：</p> <ul><li><code>instance.keys()</code>：返回<strong>键名</strong>的迭代器</li> <li><code>instance.values()</code>：返回<strong>键值</strong>的迭代器</li> <li><code>instance.entries()</code>：返回<strong>键值对</strong>的迭代器</li> <li><code>instance.forEach()</code>：使用回调函数遍历每个成员
<ul><li><code>instance.forEach((value,key,self)=&gt;{...})</code></li></ul></li></ul> <h4 id="weakset："><a href="#weakset：" class="header-anchor">#</a> WeakSet：</h4> <p>WeakSet 的成员<strong>只能是对象</strong>，而不能是其他类型的值。</p> <p>也是<strong>弱引用</strong>。不容易出现内存泄漏。</p> <p><strong>无法遍历</strong>，不支持<code>keys()</code>、<code>values()</code>和<code>entries()</code>方法，也没有<code>size</code>属性。</p> <h3 id="_10】array"><a href="#_10】array" class="header-anchor">#</a> 10】Array</h3> <p>Array构造函数中的私有方法：</p> <ul><li><code>Array.isArray()</code>：判断数组类型</li> <li><code>Array.from()</code>：一个<strong>类数组或可迭代对象</strong>强转成一个数组
<ul><li><code>Array.prototype.slice.call()</code>都可以转成数组</li></ul></li> <li><code>Array.of()</code>：创建具有所有参数新数组，而不考虑参数的数量或类型。</li></ul> <p>Array原型上的方法：（<code>Array.prototype.method</code>）</p> <ul><li><code>array.push()</code>入栈、<code>array.pop()</code>出栈</li> <li><code>array.unshift()</code>头增、<code>array.shift()</code>头删</li> <li><code>array.indexOf()</code>、<code>array.includes()</code> <ul><li>返回从索引0开始的第一个找到的数，找不到返回-1</li></ul></li> <li><code>array.keys()</code>、<code>array.values()</code>、<code>array.entries()</code> <ul><li>都会生成一个迭代器，需要在再次<code>for of</code>来执行迭代器</li></ul></li> <li><code>array.splice(index,count,item..)</code>：新增、删除、修改元素，返回包含被删除项目的新数组；<strong>会改变原数组</strong> <ul><li>必须至少传入前两个参数</li></ul></li> <li><code>array.slice(start,end)</code>：裁剪数组，返回裁剪后的数组，<strong>并不改变原数组</strong> <ul><li>必须至少传入第一个参数</li> <li>裁剪的数组<strong>包含start不包含end</strong>。</li> <li>如果start或者end为负数，则按照<code>-1</code>最后一个元素，<code>-2</code>倒数第二个元素的顺序来指定元素，依然是遵循包含start不包含end。</li></ul></li> <li><code>array.join()</code>：拼接成字符串，并不改变原数组</li> <li><code>array.concat()</code>：合并数组，并不改变原数组</li> <li><code>array.reverse()</code>：翻转数组，返回翻转后的数组，<strong>会改变原数组</strong></li> <li><code>array.sort()</code>：排序数组，返回排序后的数组，<strong>会改变原数组</strong> <ul><li><code>a.sort((pre, back) =&gt; pre - back)</code>升序从小到大</li> <li><code>a.sort((pre, back) =&gt; back - pre)</code>降序从大到小</li> <li><code>pre-back&gt;0</code>前后数字交换；<code>pre-back&lt;0</code>前后数字不交换</li></ul></li> <li><code>array.every()</code>：检测<strong>所有元素</strong>是否满足一定条件，满足的话就返回 true，否则就返回 false
<ul><li><code>array.every((item,index,self)=&gt; item&gt;0 )</code></li></ul></li> <li><code>array.some()</code>：如果有<strong>一个</strong>元素，满足条件就返回 true，否则的话返回 false
<ul><li><code>array.some((item,index,self)=&gt; item&gt;0 )</code></li></ul></li> <li><code>array.find()</code>：方法返回数组中满足提供的测试函数的<strong>第一个元素的值</strong>。否则返回 undefined
<ul><li><code>array.find((item,index,self)=&gt; item&gt;0 )</code></li></ul></li> <li><code>array.filter()</code>：数组过滤，返回过滤之后的新数组。不会改变原数组。
<ul><li><code>array.filter((item,index,self)=&gt; item&gt;0 )</code></li></ul></li> <li><code>array.forEach()</code>：遍历一次数组并执行回调，回调中 return 返回的值并没有意义，所以它<strong>没有返回值</strong>，（只是单纯的遍历数组同时执行一次回调函数）不会改变原数组。
<ul><li><code>array.forEach((item,index,self)=&gt; {...})</code></li></ul></li> <li><code>array.map()</code>：遍历一次数组并执行回调，<strong>回调中 return 返回的值会组成一个新数组作为返回值</strong>。不会改变原数组。
<ul><li><code>array=[1,2,3]</code></li> <li><code>array.map((item,index,self)=&gt; {return item*2 })</code></li> <li>最终返回的结果是一个新数组：<code>[2,4,6]</code></li></ul></li> <li><code>array.reduce()</code>：接收两个参数，第一个参数是回调，第二个参数是初始值
<ul><li><code>array.reduce(callback,initialValue（可选）)</code></li> <li><code>callback=(pre,cur,index,self)=&gt;{...return newValue}</code> <ul><li>首次进入如果有<code>initialValue</code>，则将<code>initialValue</code>赋给<code>pre</code></li> <li>如果没有<code>initialValue</code>，则取数组的第一个数作为<code>pre</code></li> <li>然后执行回调时，都会将<code>return</code>后面的<code>newValue</code>赋给<code>pre</code></li></ul></li></ul></li></ul> <h3 id="_11】object"><a href="#_11】object" class="header-anchor">#</a> 11】Object</h3> <p>Object构造函数中的私有方法：</p> <ul><li><p><code>Object.assign(target,...sources)</code>：方法用于将所有可枚举属性的值从一个或多个源对象复制到目标对象。它将返回目标对象。</p> <ul><li>可用于深拷贝对象，合并数组。</li></ul></li> <li><p><code>Object.create(obj)</code>：方法创建一个新对象，使这个新对象的<code>__proto__</code>指向<code>obj</code></p></li> <li><p><code>Object.freeze(obj)</code>：<strong><code>Object.freeze()</code></strong> 方法可以<strong>冻结</strong>一个对象。一个被冻结的对象再也不能被修改；冻结了一个对象则不能向这个对象添加新的属性，不能删除已有属性，不能修改该对象已有属性的可枚举性、可配置性、可写性，以及不能修改已有属性的值。此外，冻结一个对象后该对象的原型也不能被修改。<code>freeze()</code> 返回和传入的参数相同的对象。（改变了传入对象，并返回修改后的对象）</p></li> <li><p><code>Object.defineProperty(obj, prop, descriptor)</code>：方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性，并返回此对象。</p> <ul><li><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'property'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'get!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> property
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        property <span class="token operator">=</span> value<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'set!!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>property <span class="token operator">=</span> <span class="token number">20</span> <span class="token comment">// set!!</span>
<span class="token keyword">let</span> i<span class="token operator">=</span>obj<span class="token punctuation">.</span>property <span class="token comment">// get!!</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// 20</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// {}</span>
<span class="token comment">//注意：此时默认property是不可枚举属性，所以打印obj是{}</span>
<span class="token comment">//我们在浏览器上面打印对象，浅色的属性都是不可枚举属性，深色的属性才是可枚举属性。</span>
</code></pre></div></li></ul></li> <li><p><code>Object.is(value1, value2)</code>：方法判断两个值是否为同一个值。</p> <ul><li><div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token number">NaN</span> <span class="token operator">==</span> <span class="token number">NaN</span><span class="token punctuation">)</span><span class="token comment">//false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token operator">==</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token comment">//false</span>
</code></pre></div></li></ul></li> <li><p><code>Object.getPrototypeOf(obj)</code>：方法返回指定对象的原型（内部<code>[[Prototype]]</code>属性的值</p></li> <li><p><code>Object.keys(obj)</code>、<code>Object.values(obj)</code>、<code>Object.entries(obj)</code></p> <ul><li>返回一个键名组成的数组、键值组成的数组、键值对组成的数组。</li> <li>只能迭代出可枚举属性<code>enumerable:true</code></li></ul></li> <li><p>...</p></li></ul> <p>Object原型上的方法：（<code>Object.prototype.method</code>）</p> <ul><li><code>obj.hasOwnProperty(prop)</code>：方法会返回一个布尔值，指示对象自身属性中是否具有指定的属性（也就是，是否有指定的键）</li> <li><code>obj.isPrototypeOf(object)</code>：方法用于测试一个对象是否存在于另一个对象的原型链上
<ul><li><code>isPrototypeOf()</code> 与<strong>instanceof</strong>运算符不同。在表达式 <code>object instanceof AFunction</code>中，<code>object</code> 的原型链是针对 <code>AFunction.prototype</code> 进行检查的，而不是针对 <code>AFunction</code> 本身。</li></ul></li> <li><code>obj.propertyIsEnumerable(prop)</code>：方法返回一个布尔值，表示指定的属性是否可枚举。</li> <li><code>obj.toString()</code>：方法返回一个表示该对象的字符串。
<ul><li>像Array数组、Set集合、Map表、Number数字、String字符串等内置对象都是在该对象上面重写了<code>toString()</code>方法。</li></ul></li></ul> <h3 id="_12】string"><a href="#_12】string" class="header-anchor">#</a> 12】String</h3> <p>String原型上的方法：（<code>String.prototype.method</code>）</p> <ul><li><code>str.charAt(index)</code>：返回指定位置的字符。
<ul><li><code>index</code>为必须参数，类型为<code>number</code>（<code>0</code>到<code>str.length-1</code>之间，否则该方法返回 空串）</li> <li>另外：<code>str.charAt()</code>即不带参数和<code>str.charAt(NaN)</code>均返回字符串的第一个字符</li></ul></li> <li><code>str.concat(str1,...,strn)</code>：用于拼接两个或多个字符串。功能和 “+” 拼接没啥两样。</li> <li><code>str.indexOf(searchStr,startIndex)</code>：和数组差不多。</li> <li><code>str.toUpperCase() / str.toLowerCase()</code>：用于字符串转换大小写。</li> <li><code>str.trim()</code>：用于删除字符串的头尾空格
<ul><li>不会改变原始字符串。</li></ul></li> <li><code>str.split('')</code>：用于把一个字符串分割成字符串数组。</li> <li><code>str.slice()</code>：和数组一样。</li> <li><code>str.substring(index1,index2)</code>：方法用于提取字符串中介于两个指定下标之间的字符。
<ul><li>参数都不支持负数（负数会被转成0）</li> <li><code>index1=负数</code>和<code>index2=负数</code>，则都会被转成0</li></ul></li> <li><code>str.substr(start,length)</code>：方法可在字符串中抽取从 <code>start</code>下标开始的指定数目的字符。
<ul><li><code>lentgh=负数</code>，则直接返回空字符串</li> <li><code>start=负数</code>，则以最后一位为<code>-1</code>，倒数第二位为<code>-2</code>的顺序计算</li></ul></li></ul> <h3 id="_13】number"><a href="#_13】number" class="header-anchor">#</a> 13】Number</h3> <p>Number构造函数中的私有方法：</p> <ul><li><code>Number.parseInt(string[, radix])</code>： 依据指定基数 [ 参数 <strong>radix</strong> 的值]，把字符串 [ 参数 <strong>string</strong> 的值] 解析成整数。</li> <li><code>Number.parseFloat(string)</code>：可以把一个字符串解析成浮点数。该方法与全局的<code>parseFloat()</code>函数相同</li> <li><code>Number.isInteger(value)</code>：用来判断一个值是否为整数。
<ul><li>注意<code>3.0</code>和<code>3</code>是同一个数字，都是整型。</li></ul></li></ul> <p>Number原型上的方法：（<code>Number.prototype.method</code>）</p> <ul><li><code>num.toString([radix])</code>：数字转换成字符串
<ul><li><code>radix</code>参数（可选）：指定要用于数字到字符串的转换的基数(从2到36)。如果未指定 radix 参数，则默认值为 10。</li></ul></li> <li><code>num.toFixed(number)</code>：方法使用定点表示法来格式化一个数值。
<ul><li>参数：<strong>规定小数的位数</strong>，是 0 ~ 20 之间的值，包括 0 和 20，有些实现可以支持更大的数值范围。如果省略了该参数，将用 0 代替。</li></ul></li></ul> <h3 id="_14】闭包"><a href="#_14】闭包" class="header-anchor">#</a> 14】闭包</h3> <ul><li><strong>函数</strong>和对其<strong>周围状态（词法环境）<strong>的引用捆绑在一起构成</strong>闭包</strong>。</li> <li>闭包可以让你从内部函数访问外部函数作用域。</li> <li>每当函数被创建，就会在函数生成时生成闭包。</li></ul> <p><code>ECStack</code>执行环境栈：当我们浏览器加载页面的时候，它会形成一个执行环境，称为：<code>ECStack</code><strong>执行环境栈</strong>；目的是：让代码放进<code>ECStack</code>中执行。它属于是栈内存（Stack）</p> <p>EC执行上下文：在JS代码在浏览器跑起来（执行时）的时候，就会产生一个<code>EC(GLOBAL)</code><strong>全局执行上下文</strong>，此时会将这个全局执行上下文<code>EC(GLOBAL)</code>，放到执行环境栈<code>ECStack</code>中执行。</p> <p>VO：<code>Variable object</code><strong>变量对象</strong>；作用：把执行上下文EC中创建的变量和变量的值，存储到<code>[[Environment]]</code>中。</p> <p>AO：<code>activation object</code><strong>活动对象</strong>；在函数上下文中，我们用活动对象(<code>activation object, AO</code>)来表示变量对象；活动对象和变量对象其实是一个东西，区别在于<strong>活动对象</strong>是在<strong>进入函数上下文</strong>时刻被创建的，它通过函数的 arguments 属性初始化</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">fo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//fn()执行后的返回值fo被引用到了全局变量x中</span>
<span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span>
<span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2</span>
<span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3</span>
<span class="token comment">//下面两种情况相当于创建了两个实例，</span>
<span class="token comment">//当前面的函数执行完之后里面的变量和函数就被垃圾回收掉，</span>
<span class="token comment">//所以不影响后面函数的执行依然打印的是a=1</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//1</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//1</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//1</span>
</code></pre></div><h4 id="垃圾回收："><a href="#垃圾回收：" class="header-anchor">#</a> 垃圾回收：</h4> <ul><li>全局变量： 在页面关闭后结束</li> <li>局部变量： 在执行的作用域块执行完成后结束</li> <li>综上， 局部变量会在其函数块执行之后自动解除，对于引用类型的局部作用域其引用关系会自动解除，大多数的引用类型的全局变量需要手动解除引用关系</li></ul> <p>两种机制：<strong>标记清楚法</strong>（Chrome）、<strong>引用计数法</strong>（IE）</p> <p>函数执行完，形成的执行上下文中，没有变量被上下文以外的内容占用，此上下文就会从执行环境栈中移除（释放），如果有被占用，则该上下文就被继续保留，压缩到执行环境栈底部。（闭包可能会导致内存泄漏，需要手动回收不用的变量）</p> <h4 id="常见面试题"><a href="#常见面试题" class="header-anchor">#</a> <a href="https://github.com/mqyqingfeng/Blog/issues/9" target="_blank" rel="noopener noreferrer">常见面试题<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//此时的for循环是全局的，i也是全局变量，执行完成后，全局变量i就变成了3</span>
    data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//当data[0]()执行时，此时函数的上下文中只有全局变量i=3</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3</span>
data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3</span>
data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//此时这里i也是全局变量，执行完毕后也会变成3</span>
    data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//闭包，保存了一个匿名函数上下文（其中有一个变量i，相当于是一个快照）</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//当data[0]()执行时，就会去找函数上下文作用域链上找变量i（i被一直引用，所以不会被垃圾回收掉）</span>
        <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//0</span>
data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span>
data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2</span>
</code></pre></div><h3 id="_15】防抖"><a href="#_15】防抖" class="header-anchor">#</a> 15】防抖</h3> <p>防抖：一定时间内重复触发会一直被推迟，直到过了规定延时时间，执行最后一次。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> timer<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//执行取消定时器，来实现</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>clearTimeout(TimerId)</code>方法可取消由<code>setTimeout()</code>方法设置的定时操作。</p> <ul><li>参数必须是由<code>setTimeout()</code>返回的 ID 值。</li></ul> <h3 id="_16】节流"><a href="#_16】节流" class="header-anchor">#</a> 16】节流</h3> <p>节流：触发开始到规定延时时间结束，只执行一次。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fun<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token comment">//通过timer去判断是否执行，并没有取消过定时器</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_17】创建对象方式"><a href="#_17】创建对象方式" class="header-anchor">#</a> 17】创建对象方式</h3> <p>①<code>new Object()</code></p> <p>重复代码多</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'zhangsan'</span>
person<span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>②对象字面量</p> <p>重复代码多</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">say</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>③工厂模式</p> <p>创建的对象原型链上只有有<code>Object</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>say</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  o<span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
  o<span class="token punctuation">.</span>say<span class="token operator">=</span>say
  <span class="token keyword">return</span> o
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>④构造函数模式</p> <p>构造函数的作用是给实例添加各种属性，形成具有自己独有属性的实例。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>say</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>say<span class="token operator">=</span>say
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//Person原型对象上有个constructor属性</span>
<span class="token comment">//Person构造函数里面又有一个prototype属性指向Person的原型对象</span>
<span class="token comment">//此时Person构造函数和Person原型对象就形成了一个环状结构</span>
</code></pre></div><p>⑤原型模式</p> <p>所有创造出来的实例，都共享原型上的属性和方法（公有属性）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">'zhangsan'</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">say</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>⑥混合模式</p> <p>构造函数模式用于<strong>定义实例属性</strong>，原型模式用于<strong>定义方法和共享的属性</strong></p> <ul><li><p>规定：</p> <ul><li>构造函数里面都只定义私有的属性和方法；</li> <li>原型对象上面定义共享的属性和方法；</li> <li>构造函数外直接给对象赋值和方法就是静态属性和方法</li></ul></li> <li><p>new关键字调用构造函数步骤：（new的过程）</p> <ol><li>创建一个新对象</li> <li>将构造函数的作用域赋给新对象（将this指向这个新对象）</li> <li>执行构造函数代码（为这个新对象添加属性）</li> <li>返回新对象 (Person原型对象的指针赋给实例对象person)</li></ol></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">say</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_18】原型链"><a href="#_18】原型链" class="header-anchor">#</a> 18】<a href="https://github.com/mqyqingfeng/Blog/issues/2" target="_blank" rel="noopener noreferrer">原型链<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>JS中每个对象都是基于Object对象创建。</p> <ul><li>当原型链由下向上找属性的过程中，如果不同原型对象上具有<strong>相同的属性名</strong>的属性，此时如果我们需要用原型对象处于原型链更上层的那个属性，我们就不能省略<code>__proto__</code>，因为在原型链由下至上找的过程中，找的第一个对应的属性名就停止了。</li> <li>实例对象访问一个属性的全过程（原型链）：
<ul><li>1.先找自己本身对象空间中的属性，找到了停止；</li> <li>2.如果没找到，使用<code>__proto__</code>找上一个原型对象，找到了停止；</li> <li>3.如果没有找到继续，继续沿<code>__proto__</code>，由下至上地找，直到找到为止；</li> <li>4.如果都没有对应的属性名，则返回<code>undefined</code>；</li> <li>注意：此过程<code>__proto__</code>可以省略。</li></ul></li></ul> <p><img src="https://img-blog.csdnimg.cn/20200807173508394.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTIyMTAzNg==,size_16,color_FFFFFF,t_70" alt="原型链"></p> <h3 id="_19】继承"><a href="#_19】继承" class="header-anchor">#</a> 19】<a href="https://github.com/mqyqingfeng/Blog/issues/16" target="_blank" rel="noopener noreferrer">继承<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>①原型继承</p> <ul><li>父类中私有和公有的属性方法，最后都会变为子类中公有的属性方法。</li> <li>引用类型的属性被所有实例共享。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">CHILD</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PARENT</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">CHILD</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> <span class="token constant">CHILD</span><span class="token punctuation">;</span>
</code></pre></div><p>缺陷：实例共享父类的私有属性</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Parent</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'kevin'</span><span class="token punctuation">,</span> <span class="token string">'daisy'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Child</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> child1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
child1<span class="token punctuation">.</span>names<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'yayu'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child1<span class="token punctuation">.</span>names<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;kevin&quot;, &quot;daisy&quot;, &quot;yayu&quot;]</span>
<span class="token keyword">var</span> child2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child2<span class="token punctuation">.</span>names<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;kevin&quot;, &quot;daisy&quot;, &quot;yayu&quot;]</span>
</code></pre></div><p>②call继承</p> <ul><li>父类私有的属性或方法 变为 子类私有的属性或方法；</li> <li>只能继承父类私有的属性或方法；</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">CHILD</span>方法中把<span class="token constant">PARENT</span>当做普通函数来执行，
让<span class="token constant">PARENT</span>中的<span class="token keyword">this</span>指向<span class="token constant">CHILD</span>的实例，
相当于给<span class="token constant">CHILD</span>的实例设置了很多<span class="token constant">PARENT</span>的私有属性和方法。
</code></pre></div><p>避免了实例共享父类私有属性</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Parent</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'kevin'</span><span class="token punctuation">,</span> <span class="token string">'daisy'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Child</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//执行时，names属性被加在了this实例上面</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> child1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
child1<span class="token punctuation">.</span>names<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'yayu'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child1<span class="token punctuation">.</span>names<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;kevin&quot;, &quot;daisy&quot;, &quot;yayu&quot;]</span>
<span class="token keyword">var</span> child2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child2<span class="token punctuation">.</span>names<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;kevin&quot;, &quot;daisy&quot;]</span>
</code></pre></div><p>③寄生组合继承</p> <ul><li>父类私有和公有的属性和方法分别是<strong>子类实例</strong>私有和公有的属性和方法。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token constant">PARENT</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x
<span class="token punctuation">}</span>
<span class="token class-name">PARENT</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getX</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token constant">CHILD</span><span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token constant">PARENT</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token comment">//保留call：继承构造函数中的私有属性或方法</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y
<span class="token punctuation">}</span>
<span class="token comment">//用于继承公用的属性或方法</span>
<span class="token class-name">CHILD</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">PARENT</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
<span class="token comment">//又使用原型链继承，此时是新创建一个Object实例，但是这个实例原型指向PARENT的原型</span>
<span class="token class-name">CHILD</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span><span class="token constant">CHILD</span>
<span class="token comment">//再把重定向的到的constructor指回B</span>
<span class="token class-name">CHILD</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getY</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>④ES6的extends继承</p> <ul><li>原理就是<strong>寄生组合继承的语法糖</strong>。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//实现 父类公有的属性和方法 成为 子类公有的属性和方法</span>
<span class="token keyword">class</span> <span class="token class-name">CHILD</span> <span class="token keyword">extends</span> <span class="token class-name">PARENT</span> <span class="token punctuation">{</span>
<span class="token comment">//=&gt;B.prototype.__proto__=A.prototype</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//实现 父类私有的属性和方法 成为 子类私有的属性和方法</span>
        <span class="token comment">//=&gt;A.call(this) 把父类当做普通方法执行，给方法传递参数，让方法中的this是子类的实例</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//如果不写constructor()，浏览器会默认创建</span>
    <span class="token comment">//constructor(...args){ super(...args) }</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_20】this指向"><a href="#_20】this指向" class="header-anchor">#</a> 20】<a href="https://rayhomie.gitee.io/rayhomieblog/JavaScript/JavaScriptThisPoint/" target="_blank" rel="noopener noreferrer">this指向<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>其实所有的函数在调用执行的时候都是使用了<code>.call</code>或者<code>.bind</code>方法进行<code>this</code>的绑定，只是分为了显式绑定和隐式绑定（默认绑定this）而已。</p> <ul><li>显示绑定
<ul><li><code>fn.call(asThis,1,2)</code></li> <li><code>fn.bind(asThis,1,2)()</code></li> <li><code>obj.method.call(obj,'hi')</code></li></ul></li> <li>隐式绑定：我们现在代码都是省略的写法，本来很久以前创建函数都是需要绑定this的，但是js设计者为了让代码看起来跟简约，就约定了简便的写法
<ul><li>对于<strong>普通函数</strong> <ul><li><code>fn(1,2)//等同于fn.call(undefined,1,2)</code></li></ul></li> <li>对于<strong>对象中的方法</strong> <ul><li><code>obj.method('hi')//等同于obj.method.call(obj,'hi')</code></li></ul></li> <li>对于<strong>数组</strong> <ul><li><code>array[0]('hi')//等同于array[0].call(array,'hi')</code></li></ul></li></ul></li></ul> <h4 id="记住以下规则："><a href="#记住以下规则：" class="header-anchor">#</a> 记住以下规则：</h4> <ul><li><strong><code>this</code>是<code>call</code>的第一个参数</strong></li> <li><strong><code>new</code>重新设计了<code>this</code></strong></li> <li><strong>箭头函数不接受<code>this</code></strong></li></ul> <h3 id="_21】深拷贝"><a href="#_21】深拷贝" class="header-anchor">#</a> 21】深拷贝</h3> <p>①通过JSON的方式实现</p> <ul><li>它是不可以拷贝<code>undefined</code>，<code>function</code>，<code>RegExp</code>等等类型的</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>②通过<code>Object.assign(target, source)</code>的方式实现</p> <ul><li>它不可以深拷贝嵌套对象。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>③使用<strong>递归</strong>的方式实现（推荐）</p> <ul><li>完美深拷贝</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 定义一个深拷贝函数  接收目标value参数</span>
<span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 定义一个变量</span>
  <span class="token keyword">let</span> result<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 如果当前需要深拷贝的是一个对象的话</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Array]'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 如果是一个数组的话</span>
      result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">deepClone</span><span class="token punctuation">(</span>value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// 判断如果当前的值是null的话；直接赋值为null</span>
      result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span>constructor <span class="token operator">===</span> RegExp<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// 判断如果当前的值是一个RegExp对象的话，直接赋值</span>
      result <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token comment">// 否则是普通对象，直接for in循环，递归赋值对象的所有值</span>
      result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token comment">// 如果不是对象的话，就是基本数据类型，那么直接赋值</span>
    result <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span><span class="token comment">// 返回最终结果</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_22】aop编程"><a href="#_22】aop编程" class="header-anchor">#</a> 22】aop编程</h3> <h4 id="把业务逻辑抽离出来："><a href="#把业务逻辑抽离出来：" class="header-anchor">#</a> 把业务逻辑抽离出来：</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">perform</span><span class="token punctuation">(</span><span class="token parameter">anyMethod<span class="token punctuation">,</span> wrappers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    wrappers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">wrapper</span> <span class="token operator">=&gt;</span> wrapper<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">anyMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    wrappers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">wrapper</span> <span class="token operator">=&gt;</span> wrapper<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> Func <span class="token operator">=</span> <span class="token function">perform</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'say'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token comment">//wrapper1</span>
  <span class="token function-variable function">initialize</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'wrapper1 beforeSay'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">close</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'wrapper1 close'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token comment">//wrapper2</span>
  <span class="token function-variable function">initialize</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'wrapper2 beforeSay'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">close</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'wrapper2 close'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token function">Func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="使用生成器函数："><a href="#使用生成器函数：" class="header-anchor">#</a> 使用生成器函数：</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">chain</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token string">'before'</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> arr <span class="token keyword">of</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">yield</span><span class="token operator">*</span> arr
    <span class="token punctuation">}</span>
    <span class="token keyword">yield</span> <span class="token string">'after'</span>
<span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> num <span class="token keyword">of</span> <span class="token function">chain</span><span class="token punctuation">(</span><span class="token punctuation">[</span>arr1<span class="token punctuation">,</span> arr2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">//before</span>
<span class="token comment">//1</span>
<span class="token comment">//2</span>
<span class="token comment">//10</span>
<span class="token comment">//20</span>
<span class="token comment">//after</span>
</code></pre></div><h4 id="before：修改原型实现"><a href="#before：修改原型实现" class="header-anchor">#</a> before：修改原型实现</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token parameter">who<span class="token punctuation">,</span>sth</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>who <span class="token operator">+</span> <span class="token string">'说话时'</span> <span class="token operator">+</span> sth<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">before</span><span class="token operator">=</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">beforeFunc</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> that<span class="token operator">=</span><span class="token keyword">this</span><span class="token comment">//也可以使用下面箭头函数，因为箭头函数没有this，没有arguments，没有原型；这里使用that变量不被垃圾回收掉。</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">beforeFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">that</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token comment">//如果是this的话，就需要看调用时的上下文，此时使用闭包，保留that变量在函数外也可以使用。</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> newFn<span class="token operator">=</span>say<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'说话前'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">newFn</span><span class="token punctuation">(</span><span class="token string">'我'</span><span class="token punctuation">,</span><span class="token string">'大笑'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果是this的话，需要看调用时的上下文。</span>

<span class="token comment">//使用ES6箭头函数：</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">before</span><span class="token operator">=</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">beforeFunc</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">beforeFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token comment">//箭头函数不支持arguments，而且不支持this，此时这个this是上一个函数的this传进箭头函数中</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="after：计数器控制执行"><a href="#after：计数器控制执行" class="header-anchor">#</a> after：计数器控制执行</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token parameter">times<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//闭包</span>
  <span class="token keyword">let</span> index<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//闭包将times变量一直存在栈中</span>
    index<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>times <span class="token operator">==</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> fn <span class="token operator">=</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'函数已执行'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//函数已执行</span>
</code></pre></div><h3 id="_23】函数柯里化"><a href="#_23】函数柯里化" class="header-anchor">#</a> 23】函数柯里化</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 第一次执行时，定义一个数组专门用来存储所有的参数</span>
  <span class="token comment">//var _args = Array.prototype.slice.call(arguments);</span>
    <span class="token keyword">var</span> _args <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">cur</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//将下一个函数的参数加入数组中</span>
        _args<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
        cur<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//写一个静态方法，在最后的时候调用执行逻辑</span>
            <span class="token keyword">return</span> _args<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> cur<span class="token comment">//递归返回当前函数</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//6</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//15</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//9</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//10</span>
</code></pre></div><h3 id="_24】数组去重"><a href="#_24】数组去重" class="header-anchor">#</a> 24】数组去重</h3> <h4 id="①集合set"><a href="#①集合set" class="header-anchor">#</a> ①集合Set</h4> <div class="language-js extra-class"><pre class="language-js"><code>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//[1,3]</span>
<span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token comment">//[1,3]</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//直接报错，不能转换Set和Map</span>
</code></pre></div><h4 id="②reduce去重includes或者indexof"><a href="#②reduce去重includes或者indexof" class="header-anchor">#</a> ②reduce去重includes或者indexOf</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">unique</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//if (pre.indexOf(cur) === -1) {</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pre<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      pre<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> pre
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="③filter和indexof"><a href="#③filter和indexof" class="header-anchor">#</a> ③filter和indexOf</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">unique</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//当前元素，在原始数组中的第一个索引==当前索引值，否则返回当前元素</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">===</span> index<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="④哈希字典obj"><a href="#④哈希字典obj" class="header-anchor">#</a> ④哈希字典obj</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">unique</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> arrry <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>obj<span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      obj<span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'已有值'</span>
      arrry<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arrry<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_25】发布订阅"><a href="#_25】发布订阅" class="header-anchor">#</a> 25】发布订阅</h3> <ol><li>首先要想好谁是发布者(比如上面的卖家)。</li> <li>然后给发布者添加一个缓存列表，用于存放回调函数来通知订阅者(比如上面的买家收藏了卖家的店铺，卖家通过收藏了该店铺的一个列表名单)。</li> <li>最后就是发布消息，发布者遍历这个缓存列表，依次触发里面存放的订阅者回调函数。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> event <span class="token operator">=</span> <span class="token punctuation">{</span>
  _arr<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//订阅者订阅消息</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">publish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//发布者发布消息发布</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token operator">=&gt;</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
subscriber<span class="token operator">--</span><span class="token operator">-</span>订阅push<span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>EventArr<span class="token operator">--</span><span class="token operator">-</span>发布遍历<span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>publisher
</code></pre></div><h3 id="_26】拖拽功能"><a href="#_26】拖拽功能" class="header-anchor">#</a> 26】拖拽功能</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">img</span> <span class="token punctuation">{</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>dv<span class="token punctuation">'</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://picsum.photos/200/300<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">//获取元素</span>
    <span class="token keyword">var</span> dv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'dv'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> isDown <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token comment">//鼠标按下事件</span>
    dv<span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//获取x坐标和y坐标</span>
        x <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
        y <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>

        <span class="token comment">//获取左部和顶部的偏移量</span>
        l <span class="token operator">=</span> dv<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
        t <span class="token operator">=</span> dv<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
        <span class="token comment">//开关打开</span>
        isDown <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment">//设置鼠标样式  </span>
        dv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cursor <span class="token operator">=</span> <span class="token string">'move'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//鼠标移动</span>
    window<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>isDown <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//获取x和y</span>
        <span class="token keyword">var</span> nx <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
        <span class="token keyword">var</span> ny <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>
        <span class="token comment">//计算移动后的左偏移量和顶部的偏移量</span>
        <span class="token keyword">var</span> nl <span class="token operator">=</span> nx <span class="token operator">-</span> <span class="token punctuation">(</span>x <span class="token operator">-</span> l<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> nt <span class="token operator">=</span> ny <span class="token operator">-</span> <span class="token punctuation">(</span>y <span class="token operator">-</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>

        dv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> nl <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
        dv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> nt <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//鼠标抬起事件</span>
    dv<span class="token punctuation">.</span><span class="token function-variable function">onmouseup</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//开关关闭</span>
        isDown <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token comment">//还原鼠标样式</span>
        dv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cursor <span class="token operator">=</span> <span class="token string">'default'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_27】无缝轮播"><a href="#_27】无缝轮播" class="header-anchor">#</a> 27】无缝轮播</h3> <p><img src="https://img-blog.csdnimg.cn/20200902113703339.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTIyMTAzNg==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p> <p>在第一个张图前面插入最后一张图，最后一张图后面插入第一张图来实现。</p> <p>如图所示，当鼠标点击轮播视口Box的左按钮，即向左移动画，动画执行完毕，立即向将定位切为最后一张图的位置。（轮播动画是由装全部图片的slider进行绝对定位来控制）</p> <h3 id="_28】解构赋值"><a href="#_28】解构赋值" class="header-anchor">#</a> 28】解构赋值</h3> <p><img src="https://img-blog.csdnimg.cn/20200901213541768.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTIyMTAzNg==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p> <h3 id="_29】commonjs和esmodules"><a href="#_29】commonjs和esmodules" class="header-anchor">#</a> 29】commonJS和ESmodules</h3> <ul><li>commonJS模块输入的是一个值的<strong>拷贝</strong>，ES6模块输出的是值的<strong>引用</strong>（所以重新对其赋值）。</li> <li>commonJS模块是<strong>运行时</strong>加载（同步），ES6模块是<strong>编译时</strong>输出接口（异步）。</li> <li>涉及相关问题：
<ul><li>webpack中的webpack_require对他们处理方式不同</li> <li>webpack的按需加载实现</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//commonJS导出一个对象</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span> name<span class="token operator">:</span>name<span class="token punctuation">,</span>age<span class="token operator">:</span>age <span class="token punctuation">}</span>
<span class="token keyword">let</span> xx<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./index'</span><span class="token punctuation">)</span>
<span class="token comment">//ES modules导出一个对象</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> name<span class="token operator">:</span>name<span class="token punctuation">,</span>age<span class="token operator">:</span>age <span class="token punctuation">}</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span>age <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./index'</span><span class="token comment">//不能任意命名，只能解构赋值</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span> name<span class="token operator">:</span>name<span class="token punctuation">,</span>age<span class="token operator">:</span>age <span class="token punctuation">}</span>
<span class="token keyword">import</span> xx <span class="token keyword">from</span> <span class="token string">'./index'</span><span class="token comment">//导入的对象可以任意取名</span>
</code></pre></div><p>commonJS模块输出的是值的拷贝，也就是说，一旦输出一个值，模块内部的变化不会影响到这个值。</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">// common.js</span>
<span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">printCount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span> 
   <span class="token keyword">return</span> <span class="token operator">++</span>count<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
     printCount<span class="token operator">:</span> printCount<span class="token punctuation">,</span>
     count<span class="token operator">:</span> count
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token comment">// index.js</span>
<span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./common'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//commonJS是值的拷贝，可以进行修改</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">printCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//改写</span>
<span class="token keyword">module</span><span class="token punctuation">.</span><span class="token keyword">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
     printCount<span class="token operator">:</span> printCount<span class="token punctuation">,</span>
     get <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token keyword">return</span> count
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//依次打印1 2 2</span>
</code></pre></div><p>在ES modules中使用export和import就可以直接实现。ES6模块是<strong>动态引用</strong>，并且不会缓存，模块里面的便令绑定其所在的模块，而是动态地去加载值，并且不能对其重新赋值</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">// es6.js</span>
<span class="token keyword">export</span> <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">printCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token operator">++</span>count<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// main1.js</span>
<span class="token keyword">import</span>  <span class="token punctuation">{</span> count<span class="token punctuation">,</span> printCount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./es6'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token comment">//1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">printCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token comment">//2</span>
</code></pre></div><p>总结：</p> <ul><li>commonjs：导出的基本数据类型是值的拷贝，对象还是引用。同步加载（需要把require的执行加载之后才能继续执行）「运行时」</li> <li>esmodule：导出的全是引用。异步加载「编译时」</li></ul> <h3 id="_30】懒加载和预加载"><a href="#_30】懒加载和预加载" class="header-anchor">#</a> 30】懒加载和预加载</h3> <p>懒加载（延迟加载）通过img标签的src属性和监听屏幕滚动事件来实现</p> <p>预加载（提前加载）通过image对象的设置url提前加载图片，再通过onload设置回调将其挂载到dom上。</p> <h3 id="_31】正则匹配url"><a href="#_31】正则匹配url" class="header-anchor">#</a> 31】正则匹配URL</h3> <p><code>/(http|https)\:\/\/www\.(.*?)\.(com|cn|org)/</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'xxxxxxxxxhttp://www.baidu.comxxxxxx'</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/(http|https)\:\/\/www\.(.*?)\.(com|cn|org)/</span><span class="token punctuation">)</span>
<span class="token comment">//http://www.baidu.com</span>
</code></pre></div><h3 id="_32】数组扁平化"><a href="#_32】数组扁平化" class="header-anchor">#</a> 32】数组扁平化</h3> <p>数组扁平化是指将一个多维数组变为一维数组。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span>  <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
</code></pre></div><p>①es6中的flat函数也可以实现数组的扁平化</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'中'</span><span class="token punctuation">,</span><span class="token string">'文'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> arr1<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span> <span class="token number">Infinity</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">//[ 1, 2, 3, 4, 5 ]</span>
</code></pre></div><p>②toString &amp; split</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">flatten</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">Number</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>	
</code></pre></div><p>③join &amp; split</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">flatten</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>④reduce &amp; 递归</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">flatten</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">flatten</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">:</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>⑤扩展运算符</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [1, 2, 3, 4, 5]</span>
</code></pre></div><p>⑥递归</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">flatten</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            res <span class="token operator">=</span> res<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">flatten</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>⑦yield* &amp; 递归</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">iterTree</span><span class="token punctuation">(</span><span class="token parameter">tree</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tree<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token function">iterTree</span><span class="token punctuation">(</span>tree<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">yield</span> tree<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'中'</span><span class="token punctuation">,</span> <span class="token string">'文'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> x <span class="token keyword">of</span> <span class="token function">iterTree</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//[1,2,'a','b','中','文',1,2,3,11,21,31,3]</span>
</code></pre></div><p>⑧<code>arr.some()</code> &amp; 循环</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">iterTree2</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">iterTree2</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//[1,2,'a','b','中','文',1,2,3,11,21,31,3]</span>
</code></pre></div><h3 id="_33】intersectionobserver-api"><a href="#_33】intersectionobserver-api" class="header-anchor">#</a> 33】<a href="http://www.ruanyifeng.com/blog/2016/11/intersectionobserver_api.html" target="_blank" rel="noopener noreferrer">IntersectionObserver API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>判断某个元素是否进入了&quot;视口&quot;，即用户能不能看到它。（顾名思义：元素与视口交叉区观察）</p> <p>传统实现方法：监听scroll事件后，调用目标元素的<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getBoundingClientRect" target="_blank" rel="noopener noreferrer">getBoundingClientRect()方法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，获得目标元素对于视口左上角的坐标，再去判断是否在视口之内。这种方法的缺点是，由于<code>scroll</code>事件密集发生，计算量很大，容易造成性能问题，也可以使用防抖节流的方式去优化。</p> <p>用法：</p> <ul><li>接受两个参数：<code>callback</code>是可见性变化时的回调函数，<code>option</code>是配置对象（该参数可选）。
<ul><li>Option参数里面的<code>threshold</code>属性决定了什么时候触发回调函数。它是一个数组，每个成员都是一个门槛值，默认为<code>[0]</code>，即交叉比例（<code>intersectionRatio</code>）达到<code>0</code>时触发回调函数。用户可以自定义这个数组。比如，<code>[0, 0.25, 0.5, 0.75, 1]</code>就表示当目标元素 0%、25%、50%、75%、100% 可见时，会触发回调函数。</li></ul></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> io <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> option<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//callback参数返回IntersectionObserverEntry对象来描述观察</span>
</code></pre></div><ul><li>构造函数的返回值是一个观察器实例。实例的<code>observe</code>方法可以指定观察哪个 DOM 节点。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> io <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span><span class="token parameter">entries</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>entries<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 开始观察</span>
io<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 停止观察</span>
io<span class="token punctuation">.</span><span class="token function">unobserve</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 关闭观察器</span>
io<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="实现懒加载："><a href="#实现懒加载：" class="header-anchor">#</a> 实现懒加载：</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>
  <span class="token parameter">changes</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    changes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> container <span class="token operator">=</span> item<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
      <span class="token keyword">var</span> content <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'template'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>content<span class="token punctuation">;</span>
      container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//添加dom</span>
      observer<span class="token punctuation">.</span><span class="token function">unobserve</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//停止观察此项目，执行加载完毕</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//观察懒加载的所有项目</span>
<span class="token function">query</span><span class="token punctuation">(</span><span class="token string">'.lazy-loaded'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="实现无限滚动："><a href="#实现无限滚动：" class="header-anchor">#</a> 实现无限滚动：</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> io <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">entries</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果不可见，就返回</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>entries<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>intersectionRatio <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token function">loadItems</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Loaded new items'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 开始观察</span>
io<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>
  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.scrollerFooter'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_34】for-in-循环bug"><a href="#_34】for-in-循环bug" class="header-anchor">#</a> 34】for in 循环bug</h3> <p>for in循环只会迭代<strong>可枚举属性</strong>，<strong>会遍历原型链</strong>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
  b<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>
  c<span class="token operator">:</span><span class="token number">3</span>
<span class="token punctuation">}</span> 
obj<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>d<span class="token operator">=</span><span class="token number">4</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//if(obj.hasOwnProperty(key))//阻止遍历原型属性</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token comment">//a,b,c,d</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//a,b,c</span>
</code></pre></div><h3 id="_35】可选链操作符"><a href="#_35】可选链操作符" class="header-anchor">#</a> 35】可选链操作符&quot;?.&quot;</h3> <p>在实际开发中，常常出现下面几种报错情况：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1. 对象中不存在指定属性</span>
<span class="token keyword">const</span> leo <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>leo<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// Uncaught TypeError: Cannot read property 'toString' of undefined</span>

<span class="token comment">// 2. 使用不存在的 DOM 节点属性</span>
<span class="token keyword">const</span> dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;dom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token punctuation">;</span> 
<span class="token comment">// Uncaught TypeError: Cannot read property 'innerHTML' of null</span>
</code></pre></div><p>在可选链 <code>?.</code> 出现之前，我们会使用短路操作 <code>&amp;&amp;</code> 运算符来解决该问题：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> leo <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>leo <span class="token operator">&amp;&amp;</span> leo<span class="token punctuation">.</span>name <span class="token operator">&amp;&amp;</span> leo<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
</code></pre></div><h4 id="可选链"><a href="#可选链" class="header-anchor">#</a> 可选链<code>?.</code></h4> <p>是指即使中间的属性不存在，也不会出现错误。如果可选链 <code>?.</code> 前面部分是 <code>undefined</code> 或者 <code>null</code>，它会停止运算并返回 <code>undefined</code>。</p> <p>语法：</p> <div class="language-js extra-class"><pre class="language-js"><code>obj<span class="token operator">?.</span>prop
obj<span class="token operator">?.</span><span class="token punctuation">[</span>expr<span class="token punctuation">]</span>
arr<span class="token operator">?.</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span>
func<span class="token operator">?.</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span>
</code></pre></div><h5 id="注意："><a href="#注意：" class="header-anchor">#</a> 注意：</h5> <ul><li>不能过度使用可选链（易导致bug）</li> <li>可选链 <code>?.</code> 之前的<strong>变量必须已声明</strong></li> <li>可选链<strong>不能用于赋值</strong></li> <li>可选链访问数组元素的方法（<code>arr?.[0]</code>）</li> <li>可选链可以访问对象的方法（<code>obj.fun?.()</code>）</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1. 对象中不存在指定属性</span>
<span class="token keyword">const</span> leo <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>leo<span class="token operator">?.</span>name<span class="token operator">?.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>leo<span class="token punctuation">.</span>name<span class="token operator">?.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//leo必须存在</span>
<span class="token comment">// undefined</span>

<span class="token comment">// 2. 使用不存在的 DOM 节点属性</span>
<span class="token keyword">const</span> dom <span class="token operator">=</span> document<span class="token operator">?.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;dom&quot;</span><span class="token punctuation">)</span><span class="token operator">?.</span>innerHTML<span class="token punctuation">;</span> 
<span class="token comment">// undefined</span>
<span class="token keyword">const</span> dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;dom&quot;</span><span class="token punctuation">)</span><span class="token operator">?.</span>innerHTML<span class="token punctuation">;</span> <span class="token comment">//document必须存在</span>
<span class="token comment">// undefined</span>
</code></pre></div><h3 id="_36】手写call、apply、bind"><a href="#_36】手写call、apply、bind" class="header-anchor">#</a> 36】手写call、apply、bind</h3> <h4 id="通过call实现bind"><a href="#通过call实现bind" class="header-anchor">#</a> 通过call实现bind</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">newBind</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> that <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">that</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
say<span class="token punctuation">.</span><span class="token function">newBind</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//{ a: 1 }</span>
<span class="token comment">//1 2 3</span>
</code></pre></div><h4 id="手写call"><a href="#手写call" class="header-anchor">#</a> 手写call</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//通过对象调用方法来修改this指向</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">call2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> ctx <span class="token operator">=</span> context <span class="token operator">||</span> window
  ctx<span class="token punctuation">.</span>func <span class="token operator">=</span> <span class="token keyword">this</span> <span class="token comment">//调用call2时，this是调用call2的方法（call2是在函数对象上）</span>
  <span class="token comment">//测试用例中这个this打印出来是：[function a]</span>
  <span class="token keyword">const</span> args <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//保存参数</span>
  <span class="token comment">//通过在ctx中新建一个 函数对象等于调用时的对象 来调用执行来修改this指向</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">?</span> ctx<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token operator">:</span> ctx<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">delete</span> ctx<span class="token punctuation">.</span>func<span class="token comment">//避免造成全局污染</span>
  <span class="token keyword">return</span> res
<span class="token punctuation">}</span>

<span class="token comment">//测试用例：</span>
obj<span class="token operator">=</span><span class="token punctuation">{</span>c<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token function">a</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment">//{c:2} 1 2</span>
a<span class="token punctuation">.</span><span class="token function">call2</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment">//{c:2,func:[function a]} 1 2</span>
</code></pre></div><h4 id="手写apply"><a href="#手写apply" class="header-anchor">#</a> 手写apply</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">apply2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> ctx <span class="token operator">=</span> context <span class="token operator">||</span> window
  ctx<span class="token punctuation">.</span>func <span class="token operator">=</span> <span class="token keyword">this</span>
  <span class="token comment">//测试用例中这个this打印出来是：[function a]</span>
  <span class="token comment">//通过在ctx中新建一个 函数对象等于调用时的对象 来调用执行来修改this指向</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">?</span> ctx<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> ctx<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">delete</span> ctx<span class="token punctuation">.</span>func<span class="token comment">//避免造成全局污染</span>
  <span class="token keyword">return</span> res
<span class="token punctuation">}</span>

<span class="token comment">//测试用例：</span>
obj<span class="token operator">=</span><span class="token punctuation">{</span>c<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token function">a</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//{c:2} 1 2</span>
a<span class="token punctuation">.</span><span class="token function">call2</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//{c:2,func:[function a]} 1 2</span>
</code></pre></div><h4 id="手写bind"><a href="#手写bind" class="header-anchor">#</a> 手写bind</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">bind2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//对context进行深拷贝，防止bind执行后返回函数未执行期间，context被修改</span>
  <span class="token keyword">const</span> ctx <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> window
  ctx<span class="token punctuation">.</span>func <span class="token operator">=</span> <span class="token keyword">this</span>
  <span class="token keyword">const</span> args <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//注意bind方法需要合并两次函数执行的参数</span>
    <span class="token keyword">const</span> Allargs <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> Allargs<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> ctx<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token operator">...</span>Allargs<span class="token punctuation">)</span> <span class="token operator">:</span> ctx<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//测试</span>
obj <span class="token operator">=</span> <span class="token punctuation">{</span> c<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token function">a</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token comment">//{c:2} 1 2 3</span>
a<span class="token punctuation">.</span><span class="token function">bind2</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token comment">//{c:2,func:[function a]} 1 2 3</span>
</code></pre></div><h3 id="_37】babel"><a href="#_37】babel" class="header-anchor">#</a> 37】babel</h3> <p>babel：需要脚手架工具转行代码（类似于打包）。.babelrl文件进行配置需要用到的presets和plugin</p> <p><a href="https://zhuanlan.zhihu.com/p/43249121" target="_blank" rel="noopener noreferrer">了解babel<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>「Plugin 会运行在 Preset 之前。</p> <p>Plugin 会从前到后顺序执行。</p> <p>Preset 的顺序则 刚好相反(从后向前)。」</p> <h1 id="计算机网络"><a href="#计算机网络" class="header-anchor">#</a> 计算机网络</h1> <h3 id="_1】osi七层模型与tcp-ip五层模型"><a href="#_1】osi七层模型与tcp-ip五层模型" class="header-anchor">#</a> 1】OSI七层模型与TCP/IP五层模型</h3> <p>OSI七层模型：</p> <ul><li>应用层</li> <li>表示层</li> <li>会话层</li> <li>传输层</li> <li>网络层</li> <li>数据链路层</li> <li>物理层</li></ul> <p>TCP/IP五层模型：</p> <ul><li>应用层</li> <li>传输层</li> <li>网络层</li> <li>数据链路层</li> <li>物理层</li></ul> <h3 id="_2】http"><a href="#_2】http" class="header-anchor">#</a> 2】HTTP</h3> <p>注意：http是一种<strong>无状态</strong>连接。</p> <p>http1.0是<strong>非持久连接</strong>：一次HTTP请求和响应就创建和关闭一次TCP连接，严重影响性能。所以只能<strong>串行执行</strong>，上一次请求发出并收到响应之后，才能继续发送下一次请求。纯文本形式传输。</p> <p>http1.1是<strong>持久连接</strong>：在一个TCP连接上可以传输多个HTTP请求和响应。创建多个TCP连接可以<strong>并行发送</strong>很多过请求，收到响应是<strong>有序</strong>的。---和all方法差不多（最多并行6个TCP连接，因为容易造成DDoS攻击，给服务器压力）纯文本形式传输。</p> <ul><li>请求发送时请求头加上<code>Connection:keep-alive</code>来保持tcp一直连接，不要关闭。<code>Connection:close</code>客户端通知服务器关闭tcp连接。</li> <li>相较于1.0版本，http1.1请求头多了host字段，可以在同一个IP地址和端口上使用不同的主机名创建多个虚拟web站点。</li> <li><strong>一个页面的请求与响应就只建立一次tcp连接，但不能并行传输http请求和响应</strong>。（也可以最多建立6个tcp连接）</li></ul> <p>http2.0更快、额外的流量花销更少</p> <ul><li>header compression（头部压缩）初次请求后将后面请求的头部信息进行压缩。</li> <li>binary framing layer（二进制分帧层）将多个请求<strong>并行</strong>发送给服务器，并且返回的结果根据streamId进行<strong>组合形成响应一次性返回给浏览器</strong>。通过二进制流的方式实现无差错。
<ul><li>位于应用层和表示层之间</li> <li><strong>一次TCP连接就可以实现并行传输HTTP请求和响应</strong></li></ul></li></ul> <div class="language-html extra-class"><pre class="language-html"><code>http1.0：每个tcp中只能串行http请求，且每次请求开辟一个tcp连接
http1.1：每个tcp中也是只能串行http请求，但是可以keep-alive，同时最多允许开辟6个tcp连接，来实现并行请求
http2.0：每个tcp中就可以通过二进制分帧层中streamID组合来实现并行http请求
</code></pre></div><h4 id="状态码："><a href="#状态码：" class="header-anchor">#</a> 状态码：</h4> <p>2xx表示请求成功</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">200</span>：成功返回，正常抓取
<span class="token number">204</span>：成功处理了请求，但没有返回任何内容
<span class="token number">206</span>：部分请求成功，
例子：①浏览器先不下载要下载的文件，而是弹窗提醒用户。
②一些流媒体技术比如在线视频，可以边看边下载。就是使用<span class="token number">206</span>来实现的。
③使用<span class="token number">206</span>状态码来实现断点续传
</code></pre></div><p>3xx表示重定向</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">301</span>：请求的网站<span class="token operator">*</span>永久<span class="token operator">*</span>转移到新的<span class="token constant">URL</span>，搜索引擎访问时，会收录新的<span class="token constant">URL</span>
<span class="token number">302</span>：请求的网页<span class="token operator">*</span>临时<span class="token operator">*</span>转移到新的<span class="token constant">URL</span>，搜索引擎会保留原来的<span class="token constant">URL</span>
<span class="token number">304</span>：被访问网页没有更新，不用再抓取，节省搜索引擎带宽（缓存）。浏览器上的缓存是最新的资源，需要浏览器使用缓存，不需要进一步抓取。
客户端有缓冲的文档并发出了一个条件性的请求。服务器告诉客户端，原来缓冲的文档还可以继续使用。
</code></pre></div><p>4xx表示请求出错</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">400</span>：请求语法错误
<span class="token number">401</span>：用户没有访问权限，需要进行身份认证
<span class="token number">403</span>：请求被服务器拒绝
<span class="token number">404</span>：未找到资源
<span class="token number">410</span>：请求资源永久删除，和<span class="token number">404</span>类似，这种页面应当用<span class="token number">301</span>永久重定向到新位置
</code></pre></div><p>5xx表示服务器内部错误（一般是后端程序的问题）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">500</span>：内部服务器错误（后端程序报错）
<span class="token number">503</span>：服务器无法使用，并发访问高，通常只是暂时的
<span class="token number">505</span>：表示Web服务器不支持此<span class="token constant">HTTP</span>协议的版本
</code></pre></div><h3 id="_3】tcp三次握手四次挥手"><a href="#_3】tcp三次握手四次挥手" class="header-anchor">#</a> 3】TCP三次握手四次挥手</h3> <p>TCP/IP协议栈从下至上分层结构：物理层，网络层（IP），传输层（TCP、UDP），应用层</p> <p>TCP特点：面向连接，可靠，保证数据是正确稳定可靠无差错的传输。</p> <p>UDP特点：无连接，尽可能交付，效率高。</p> <p>TCP三次握手：标志位ACK,SYN / 确认号ack / 序列号seq</p> <p>四次分手：标志位FIN,ACK / 确认号ack / 序列号seq</p> <div class="language-js extra-class"><pre class="language-js"><code>Client                             Server
①<span class="token operator">--</span><span class="token operator">-</span><span class="token constant">SYN</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">--</span><span class="token operator">-</span>seq<span class="token operator">=</span>x<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">--</span><span class="token operator">-</span><span class="token constant">SYN</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">--</span><span class="token operator">-</span><span class="token constant">ACK</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">--</span><span class="token operator">-</span>seq<span class="token operator">=</span>y<span class="token operator">--</span><span class="token operator">-</span>ack<span class="token operator">=</span>x<span class="token operator">+</span><span class="token number">1</span><span class="token operator">--</span><span class="token operator">-</span>②
③<span class="token operator">--</span><span class="token operator">-</span><span class="token constant">ACK</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">--</span><span class="token operator">-</span>ack<span class="token operator">=</span>y<span class="token operator">+</span><span class="token number">1</span><span class="token operator">--</span><span class="token operator">-</span>seq<span class="token operator">=</span>x<span class="token operator">+</span><span class="token number">1</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>
<span class="token punctuation">(</span>客户端和服务端相互确认通信没问题，同时<span class="token operator">*</span>开启资源<span class="token operator">*</span><span class="token punctuation">)</span>

开启资源<span class="token operator">&lt;</span><span class="token operator">--</span><span class="token operator">--</span>数据传输<span class="token operator">--</span><span class="token operator">-</span>资源交换<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span>开启资源

①<span class="token operator">--</span><span class="token operator">-</span><span class="token constant">FIN</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">--</span><span class="token operator">-</span>seq<span class="token operator">=</span>u<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">--</span><span class="token operator">-</span><span class="token constant">ACK</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">--</span><span class="token operator">-</span>seq<span class="token operator">=</span>v<span class="token operator">--</span><span class="token operator">-</span>ack<span class="token operator">=</span>u<span class="token operator">+</span><span class="token number">1</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>②
       <span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span>期间还是可以数据传输<span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&lt;</span><span class="token operator">--</span><span class="token operator">-</span><span class="token constant">FIN</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">--</span><span class="token operator">-</span><span class="token constant">ACK</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">--</span><span class="token operator">-</span>seq<span class="token operator">=</span>w<span class="token operator">--</span><span class="token operator">-</span>ack<span class="token operator">=</span>u<span class="token operator">+</span><span class="token number">1</span><span class="token operator">--</span><span class="token operator">-</span>③
④<span class="token operator">--</span><span class="token operator">-</span><span class="token constant">ACK</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">--</span><span class="token operator">-</span>seq<span class="token operator">=</span>u<span class="token operator">+</span><span class="token number">1</span><span class="token operator">--</span><span class="token operator">-</span>ack<span class="token operator">=</span>w<span class="token operator">+</span><span class="token number">1</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>
<span class="token punctuation">(</span>客户端先通知服务端关闭连接，服务端收到即回复<span class="token punctuation">)</span>
<span class="token punctuation">(</span>服务端准备好了才通知客户端关闭连接，服务端收到即回复<span class="token punctuation">)</span>
四次挥手的目的是：让对方的<span class="token operator">*</span>资源不能随意释放<span class="token operator">*</span>，可靠传输。
（挥手可以看成离婚，②<span class="token operator">~</span>③之间可以看成冷静期）
</code></pre></div><p>SOCKET套接字：<code>ip:port(local)---ip:prot(foreign)</code>必须是<strong>四元组</strong>的<strong>唯一标识</strong>。</p> <p><img src="https://img-blog.csdnimg.cn/20200701180736168.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTIyMTAzNg==,size_16,color_FFFFFF,t_70" alt=""></p> <p>可靠传输的实现：<a href="https://www.bilibili.com/video/BV194411h71z" target="_blank" rel="noopener noreferrer">以字节为单位的滑动窗口<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li>接收窗口和发送窗口的大小不一样大</li> <li><strong>缓存处理</strong>不按序到达的数据</li> <li>接收方必须有累积确认和捎带确认机制（接收方不应过分推迟发送确定，会导致超时重传）</li> <li>TCP是全双工通信，双方可同时接收发送数据</li></ul> <h3 id="_4】https"><a href="#_4】https" class="header-anchor">#</a> 4】HTTPS</h3> <ul><li><p>明文传输：在HTTP中我们使用的是明文传输，黑客可以随时截取传输的数据，显然这并不安全。</p></li> <li><p>对称加密：客户端和服务器使用同种方式对数据进行加密和解密，<strong>黑客截取数据依然可以使用这种的方式进行解密</strong>。（因为服务器不可能对每个客户端都储存一种加密的方式）</p></li> <li><p>非对称加密：（<strong>无法实现服务器对客户端返回数据的加密和解密</strong>）</p> <ul><li>私钥只有客户端才有，公钥都可以拿到；</li> <li>（<strong>公钥加密，私钥解密</strong>）公钥对传输数据进行加密，只有对应的私钥才能将其解密；</li> <li>（<strong>私钥签名，公钥验证</strong>）使用私钥加密过的数据，可以用公钥进行验证是否被对应私钥加密过。</li></ul></li> <li><p><strong>非对称加密</strong>来加密<strong>密钥</strong>，<strong>对称加密</strong>来加密<strong>通信数据</strong>。</p> <ul><li>可以解决上面两种加密的弊端</li> <li>先利用非对称加密的方式浏览器向服务器来协商传输数据时的需要用的密钥，然后再用这个密钥来加密之后要传输的数据。</li> <li>但是依然有安全问题（<strong>中间人代理拦截攻击问题</strong>）</li></ul></li> <li><p>第三方权威机构认证服务器安全（解决中间人拦截攻击问题）</p> <ul><li><strong>CA的公钥</strong>内置在浏览器中</li> <li>服务器向CA付费，用<strong>CA的私钥</strong>加密<strong>服务器的公钥</strong>（进行<strong>签发证书</strong>），浏览器向服务器请求后，服务器返回给浏览器<strong>签发的证书</strong>，浏览器使用内置的<strong>CA的公钥</strong>进行验证（证书是不是CA签发的）（原理是：非对称加密中私钥加密，公钥验证）</li> <li>之后再进行非对称加密配合对称加密进行传输数据，完美了</li></ul></li></ul> <p><img src="https://img-blog.csdnimg.cn/20200903131940399.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTIyMTAzNg==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p> <p>通过非对称加密+对称加密+GlobalSign CA认证才是最安全的。</p> <p>打比分：有两个盒子及对应的锁，一个盒子锁着通信数据（对称加密），另一个盒子锁着上个盒子的钥匙（非对称哈希加密）。<strong>浏览器来创建对称加密密钥</strong>。</p> <p><img src="https://img-blog.csdnimg.cn/20200607114457351.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTIyMTAzNg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <h3 id="_5】cookie、session、token"><a href="#_5】cookie、session、token" class="header-anchor">#</a> 5】Cookie、Session、Token</h3> <p>Cookie：<strong>cookie数据存放在客户的浏览器上</strong>，由服务器端来创建（服务器把“JSESSIONID”作为cookie的name，SessionId的值作为cookie的value），每次浏览器请求时都把这个cookie放在请求头里面</p> <ul><li>HTTP响应通过 Set-Cookie 设置 Cookie</li> <li>浏览器访问指定域名是必须带上 Cookie 作为 Request Header</li> <li>Cookie 一般用来记录用户信息</li></ul> <p>Session：<strong>session数据存放在服务器上</strong>，服务器对Session列表是以Map的形式来管理，Map的key是SessionId，value是Session对象的引用。</p> <ul><li>Session 是服务器端的内存（数据）</li> <li>Session 一般通过在 Cookie 里记录 SessionID 实现</li> <li>SessionID 一般是随机数</li></ul> <p>Token：不用像SessionId一样保存在服务器上，是通过哈希算法程序计算得到（用时间换取空间），使用过期时间来解决防止token被盗带来的隐患，设置token较短的过期时间，然后重新进行生产token，使其变得动态。userId+哈希算法+密钥=签名token</p> <p>LocalStorage 和 Cookie 的区别是什么？</p> <ul><li>Cookie 会随请求被发到服务器上，而 LocalStorage 不会</li> <li>Cookie 大小一般4k以下，LocalStorage 一般5Mb 左右</li></ul> <h3 id="_6】cors跨域问题"><a href="#_6】cors跨域问题" class="header-anchor">#</a> 6】CORS跨域问题</h3> <p>浏览器同源策略：<strong>协议，端口，主机都相同才同源</strong>。</p> <ul><li>JSONP：script和img标签中的src属性不限制跨域请求，JSONP只能发GET请求。</li> <li>Form：标签提交不限制跨域请求。</li> <li>CORS：(<code>Cross-origin resource sharing</code>)标准解决方案<a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="noopener noreferrer"><strong>跨域资源共享</strong><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，分为<strong>简单请求</strong>和<strong>非简单请求</strong>。</li> <li>反向代理proxy：使用代理<strong>请求转发</strong>实现跨域请求。</li> <li><a href="https://segmentfault.com/a/1190000000702539#articleHeader0" target="_blank" rel="noopener noreferrer">iframe<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：页面嵌套，使用ifrmae跨域要满足一个基本条件，父页面和子页面都是自己可以控制的，如果随便把iframe指向一个其他网站，想通过跨域手段操作它基本上是不可能的。
<ul><li>document.domain：实现最简单但只能用于同一个主域下不同子域之间的跨域请求
<ul><li>父页面通过<code>ifr.contentWindow</code>就可以访问子页面的window，子页面通过<code>parent.window</code>或<code>parent</code>访问父页面的window，接下来可以进一步获取dom和js</li></ul></li> <li>postMessage：HTML5新增方法
<ul><li><code>postMessage(message, targetOrigin)</code>（在父页面中使用）
<ul><li>message: 是要发送的消息，类型为 String、Object (IE8、9 不支持)
targetOrigin: 是限定消息接收范围，不限制请使用 '*'</li></ul></li> <li><code>window.addEventListener('message', function(e))</code>（子页面中监听message事件）
<ul><li>回调函数第一个参数接收 Event 对象，有三个常用属性：（在子页面中传入回调）</li> <li>data: 消息
origin: 消息来源地址
source: 源 DOMWindow 对象</li></ul></li></ul></li></ul></li></ul> <p>CORS跨域资源共享：</p> <p>完全依靠服务器端来操作，浏览器端只需要设置<code>withCredentials</code>属性携带cookie限制。（<strong>注意cookie在CORS中依然是同源的</strong>）</p> <p>简单请求：这是为了兼容Form表单发出跨域请求，触发条件：<code>HEAD</code>、<code>GET</code>、<code>POST</code>请求且头信息不超过<code>Accept</code>、<code>Accept-Language</code>、<code>Content-Language</code>、<code>Last-Event-ID</code>、且<code>Content-Type</code>的值只限于以下三个值<code>application/x-www-form-urlencoded</code>（不包含文件上传的post请求的两种编码格式）、<code>multipart/form-data</code>（包含文件上传的post请求的两种编码格式）、<code>text/plain</code>（纯文本）</p> <h4 id="cors会有两次请求："><a href="#cors会有两次请求：" class="header-anchor">#</a> cors会有两次请求：</h4> <ul><li><p><strong>简单请求不会触发 CORS 预检请求</strong>。</p></li> <li><p>“需预检的请求”要求必须首先使用<strong>OPTIONS</strong>方法发起一个预检请求到服务器，以获知服务器是否允许该实际请求。<strong>预检请求</strong>的使用，可以避免跨域请求对服务器的用户数据产生未预期的影响。</p></li></ul> <h4 id="总结："><a href="#总结：" class="header-anchor">#</a> 总结：</h4> <ol><li>发现是跨域请求，浏览器自动请求头添加<code>Origin</code>字段，用于后端服务器验证。</li> <li>服务器都会正常返回响应，状态码无法判断是否跨域请求成功，需要浏览器自动判断服务器返回的响应头信息中，是否有<code>Access-Control-Allow</code>字段。</li> <li>如果需要CORS请求中使用Cookie，需要前端和后端同时设置<code>Credentials</code>，前端才会正常被设置cookie和发送cookie，后端才会正常给前端设置cookie和接收cookie。</li> <li>如果要发送Cookie，<code>Access-Control-Allow-Origin</code>就不能设为星号，<strong>必须指定明确的、与请求网页一致的域名</strong>。</li> <li><strong>Cookie依然遵循同源策略</strong>，只有用本服务器域名设置的Cookie才会被浏览器发送。</li></ol> <h3 id="_7】service-worker"><a href="#_7】service-worker" class="header-anchor">#</a> 7】service worker</h3> <p>一个服务器与浏览器之间的中间人角色，如果网站中注册了service worker那么它可以拦截当前网站所有的请求，进行判断（需要编写相应的判断程序），如果需要向服务器发起请求的就转给服务器，如果可以直接使用缓存的就直接返回缓存不再转给服务器。从而大大提高浏览体验。</p> <h3 id="_8】http缓存"><a href="#_8】http缓存" class="header-anchor">#</a> 8】<a href="https://mp.weixin.qq.com/s/vL9iBqmF-BQEIpalDdRmkg" target="_blank" rel="noopener noreferrer">HTTP缓存<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>强缓存：Expires和Pragma、Cache-control:max-age=xxx</p> <p>协商缓存：Last-Modified/If-Modified-Since、Etag/If-None-Match</p> <h4 id="强缓存："><a href="#强缓存：" class="header-anchor">#</a> 强缓存：</h4> <p><code>Expires</code>策略设置过期时间，是http1.0老版本的，</p> <ul><li><code>Pragma</code> :设置页面是否缓存，为<code>Pragma</code>则缓存，<code>no-cache</code>则不缓存，当该字段值为<code>no-cache</code>的时候，会知会客户端不要对该资源读缓存，即每次都得向服务器发一次请求才行。（是http1.0老版本推出）</li></ul> <p><code>Cache-control</code>策略是http1.1最新的。</p> <ul><li>相较于<code>Expires</code>选择更多，设置更细致；</li> <li>如果同时设置优先级高于<code>Expires；</code></li></ul> <h5 id="cache-control"><a href="#cache-control" class="header-anchor">#</a> Cache-control</h5> <table><thead><tr><th style="text-align:left;">Cache-directive</th> <th style="text-align:left;">说明</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>public</code></td> <td style="text-align:left;">所有内容都将被缓存(客户端和代理服务器都可缓存)</td></tr> <tr><td style="text-align:left;"><code>private</code></td> <td style="text-align:left;">内容只缓存到私有缓存中(仅客户端可以缓存，代理服务器不可缓存)</td></tr> <tr><td style="text-align:left;"><code>no-cache</code></td> <td style="text-align:left;">必须先与服务器确认返回的响应是否被更改，然后才能使用该响应来满足后续对同一个网址的请求。因此，如果存在合适的验证令牌 (ETag)，no-cache 会发起往返通信来验证缓存的响应，如果资源未被更改，可以避免下载。</td></tr> <tr><td style="text-align:left;"><code>no-store</code></td> <td style="text-align:left;">所有内容都不会被缓存到缓存或 Internet 临时文件中</td></tr> <tr><td style="text-align:left;"><code>must-revalidation/proxy-revalidation</code></td> <td style="text-align:left;">如果缓存的内容失效，请求必须发送到服务器/代理以进行重新验证</td></tr> <tr><td style="text-align:left;"><code>max-age=xxx (xxx is numeric)</code></td> <td style="text-align:left;">缓存的内容将在 xxx <strong>秒</strong>后失效, 这个选项只在HTTP 1.1可用, 并如果和<strong>Last-Modified</strong>一起使用时, 优先级较高</td></tr></tbody></table> <h5 id="max-age最为重要设置过期时间"><a href="#max-age最为重要设置过期时间" class="header-anchor">#</a> <strong>max-age最为重要设置过期时间</strong></h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> maxAgeTime <span class="token operator">=</span> <span class="token number">60</span> <span class="token comment">//过期时间</span>
res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;Cache-Control&quot;</span><span class="token operator">:</span> <span class="token string">'max-age='</span> <span class="token operator">+</span> maxAgeTime
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>那么在60s内，如果再去请求这个文件的话，是不会发起请求的。因为还没有过期呢！唯一例外是如果这个文件是你在浏览器地址栏输入的地址来请求的（比如你请求localhost:3030/static/style.css），当你刷新的时候就会让当前的这个文件所设定的过期时间失效，直接去请求服务器来看是返回个304还是返回新文件。一般这么请求的都是我们常说的入口文件，入口文件一刷新就会重新向服务器请求，但是<strong>入口文件里面所引入的文件如js，css等不会随着刷新而另过期时间失效。除非你单找出来那个引入链接，通过浏览器地址栏去查询它并刷新</strong> ：）。</p> <h5 id="cache-control的值有很多"><a href="#cache-control的值有很多" class="header-anchor">#</a> <code>Cache-Control</code>的值有很多:</h5> <p>常用的有<code>max-age</code>，<code>no-cache</code>和<code>no-store</code>。</p> <p><code>max-age</code> 是资源从响应开始计时的最大新鲜时间，一般响应中还会出现<code>age</code>标明这个资源当前的新鲜程度。</p> <p><code>no-cache</code> 会让浏览器缓存这个文件到本地但是不用，Network中<code>disable-cache</code>勾中的话就会在请求时带上这个header，会在下一次新鲜度验证通过后使用这个缓存。</p> <p><code>no-store</code> 会完全放弃缓存这个文件。</p> <p>服务器响应时的<code>Cache-Control</code>略有不同，其中有两个需要注意下:</p> <ul><li>public, public 表明这个请求可以被任何对象缓存，代理/CDN等中间商。</li> <li>private，private 表明这个请求只能被终端缓存，不允许代理或者CDN等中间商缓存。</li></ul> <p><code>Expires</code>是一个具体的日期，到了那个日期就会让这个缓存失活，优先级较低，存在<code>max-age</code>的情况下会被忽略，和本地时间绑定，修改本地时间可以绕过。</p> <p>另外，如果你的服务器的返回内容中不存在<code>Expires</code>，<code>Cache-Control: max-age</code>，或 <code>Cache-Control:s-maxage</code>但是存在<code>Last-Modified</code>时，那么浏览器默认会采用一个启发式的算法，即启发式缓存。通常会取响应头的<code>Date_value \- Last-Modified_value</code>值的10%作为缓存时间，之后浏览器仍然会按强缓存来对待这个资源一段时间，如果你不想要缓存的话务必确保有<code>no-cache</code>或<code>no-store</code>在响应头中。</p> <h4 id="协商缓存："><a href="#协商缓存：" class="header-anchor">#</a> 协商缓存：</h4> <p>常用的方式为Etag和Last-Modified</p> <h5 id="①last-modified-if-modified-since"><a href="#①last-modified-if-modified-since" class="header-anchor">#</a> ①Last-Modified/If-Modified-Since</h5> <p>Last-Modified方式需要用到两个字段：Last-Modified &amp; if-modified-since。
先来看下这两个字段的形式：</p> <ul><li>Last-Modified : Fri , 12 May 2006 18:53:33 GMT</li> <li>If-Modified-Since : Fri , 12 May 2006 18:53:33 GMT</li></ul> <p>当第一次请求某一个文件的时候，就会传递回来一个 Last-Modified 字段，其内容是这个文件的修改时间。当这个文件缓存过期，浏览器又向服务器请求这个文件的时候，会自动带一个请求头字段 If-Modified-Since ，其值是上一次传递过来的 Last-Modified 的值，拿这个值去和服务器中现在这个文件的最后修改时间做对比，如果相等，那么就不会重新拉取这个文件了，返回 304 让浏览器读过期缓存。如果不相等就重新拉取。</p> <div class="language-js extra-class"><pre class="language-js"><code>浏览器<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>第一次请求<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span>服务器
<span class="token operator">&lt;</span><span class="token operator">--</span><span class="token operator">-</span>响应Cache<span class="token operator">-</span>Control<span class="token operator">:</span>max<span class="token operator">-</span>age<span class="token operator">=</span><span class="token number">60</span><span class="token punctuation">;</span>last<span class="token operator">-</span>modified<span class="token operator">:</span><span class="token punctuation">[</span>文件修改时间<span class="token punctuation">]</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token operator">--</span><span class="token operator">-</span>max<span class="token operator">-</span>age时间过了<span class="token punctuation">;</span>If<span class="token operator">-</span>Modified<span class="token operator">-</span>Since<span class="token operator">:</span><span class="token punctuation">[</span>浏览器缓存中的文件修改时间<span class="token punctuation">]</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>服务器去对比<span class="token string">'文件修改时间'</span>决定是否返<span class="token number">304</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
</code></pre></div><h5 id="②etag-if-none-match"><a href="#②etag-if-none-match" class="header-anchor">#</a> ②Etag/If-none-match</h5> <p>这两个值是由服务器生成的每个资源的<strong>唯一标识符</strong>，只有资源变化的时候这个值就会改变，与last-Modified区别是，当服务器返回304 Not-Modified的时候由于Etag重新生成过，response还是会把Etag返回，即使Etag和之前的相比没有变化。</p> <h5 id="etag和last-modified比较"><a href="#etag和last-modified比较" class="header-anchor">#</a> Etag和last-Modified比较</h5> <p>Etag的出现就是为了解决last-Modified不能解决的问题：</p> <p>1、有的文件修改过于频繁，而<strong>last-Modified只能精确到秒</strong>。</p> <p>2、一些文件<strong>周期性改变的文件</strong>内容并没有改变，只是时间改变了，此时我们并不希望服务器认为内容变化了，重新去get。</p> <p>3、（<strong>服务器的问题</strong>）有些服务器不能精确到文件的具体最后的修改时间。（比如一串字符串不能正确识别，因为last-modified是绝对时间格式）</p> <h3 id="_9】xss跨站脚本攻击"><a href="#_9】xss跨站脚本攻击" class="header-anchor">#</a> 9】XSS跨站脚本攻击</h3> <p>XSS（cross site Scripting）存在的原因？</p> <ul><li>对get请求<strong>url中的参数</strong>或者<strong>用户提交输入</strong>的地方没有做充分的过滤。</li> <li>攻击者将脚本代码提交到服务器，当其他用户访问web网页的时候，被执行攻击者的脚本代码。</li></ul> <p>防范：</p> <ul><li>对输入框、url参数进行过滤。
<ul><li>前端输入框进行正则表达式拦截，后端也进行过滤拦截</li></ul></li> <li>对网页脚本脚本进行编码。
<ul><li>对需要展示的html标签进行转义处理</li></ul></li> <li>Cookie设置http-only。
<ul><li>如果在Cookie中设置了&quot;HttpOnly&quot;属性，那么通过程序(JS脚本、Applet等)将<strong>无法读取到Cookie信息</strong>，这样能有效的防止XSS攻击。</li></ul></li></ul> <h3 id="_10】csrf攻击"><a href="#_10】csrf攻击" class="header-anchor">#</a> 10】CSRF攻击</h3> <p>CSRF（Cross-site request forgery）跨站请求伪造？</p> <p>用户未退出关闭正常站点，同时打开黑客的站点，黑客站点向正常站点请求，此时会携带正常站点的cookie一起发送，造成csrf。</p> <ul><li>src属性的get请求可以跨域携带cookie，实施攻击</li> <li>from表单中的post请求也可以跨域携带cookie，实施攻击</li></ul> <p>防范：</p> <ul><li>输入验证码（确保是用户行为，非黑客行为）</li> <li>尽量使用post</li> <li>同源检测 HTTP referer header（会记录当前请求的来源地址，后端进行判断）</li> <li>Anti CSRF Token
<ul><li>token一直都在变化，通过计算生成。</li> <li>双重cookie验证</li></ul></li></ul> <h3 id="_11】token储存在哪"><a href="#_11】token储存在哪" class="header-anchor">#</a> 11】token储存在哪</h3> <p>关于 token 的存储问题</p> <p>JWT：</p> <ul><li>csrf 攻击无法获取第三方的 cookie，而是直接使用cookie进行查询的时候会自动携带 cookie。（跨不跨域都可以进行csrf攻击，因为src或者form可以跨域发出请求）</li> <li>xss攻击通过代码注入可以获取 cookie。需要设置转义。</li></ul> <p>方式一、客户端使用cookie直接认证，需要设置cookie为<strong>httpOnly</strong>，可以防止 xss攻击。但是无法防止csrf攻击。需要设置伪随机数X-CSRF-<strong>TOKEN</strong>。（推荐！不需要处理xss，并且csrf随机数有完善的应用机制）</p> <p>方式二、 客户端使用 auth授权头认证，token存储在 cookie中，需要防止xss攻击。可以防止 csrf攻击，因为 csrf只能在请求中携带 cookie，而这里必须从 cookie中拿出相应的值并放到 authorization 头中。实际上cookie不能跨站（同源政策）被取出，因此可以避免 csrf 攻击。（适用于 ajax请求或者 api请求，可以方便的设置 auth头）</p> <p>方式三、可以将token存储在localstorage里面，需要防止xss攻击。实现方式可以在一个统一的地方复写请求头，让每次请求都在header中带上这个token， 当token失效的时候，后端肯定会返回401，这个时候在你可以在前端代码中操作返回登陆页面，清除localstorage中的token。（适用于 ajax请求或者 api请求，可以方便的存入 localstorage）（小心cors非简单请求预检请求，设置）</p> <p>设置HTTPS，可以防止提交时的用户名或者密码被拦截或读取。</p> <h3 id="_12】cookie跨域访问怎么解决？"><a href="#_12】cookie跨域访问怎么解决？" class="header-anchor">#</a> 12】cookie跨域访问怎么解决？</h3> <p>①Nginx进行代理解决cookie跨域访问</p> <ul><li>正向代理：正向代理隐藏真实客户端（是客户端域名=服务端域名）</li> <li>反向代理：反向代理隐藏真实服务端（使服务端域名=客户端域名）</li></ul> <p>因为cookie存在跨域问题，其中一个解决方法是，设置Nginx代理服务器，将两个服务器域名统一到一个<strong>反向代理服务器</strong>。</p> <p>②解决顶级域名与二级域名之间的cookie跨域问题：设置domain</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#通过设置domain</span>
<span class="token comment">#顶级域名服务器与二级域名服务器之间哪个设置都能生效</span>
<span class="token comment">#设置完毕后写回到客户端，用另一个服务器即可访问此Cookie</span>
cookie.setDomain<span class="token punctuation">(</span><span class="token string">&quot;test.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h3 id="_13】jsonp跨域"><a href="#_13】jsonp跨域" class="header-anchor">#</a> 13】JSONP跨域</h3> <p>前端代码</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>http://localhost:3000/jsonp?name=leihao&amp;age=20&amp;callback=((res) =&gt; {
  console.log(res)
})<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>后端服务器</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/jsonp'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> callback <span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>query
  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>callback<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>启动服务，访问html页面，前端控制台会打印<code>{name: &quot;leihao&quot;, age: &quot;20&quot;}</code></p> <p>这是抓到的接口结果：<code>((res) =&gt; { console.log(res)})({&quot;name&quot;:&quot;leihao&quot;,&quot;age&quot;:&quot;20&quot;})</code>，因为是script中的src去请求的字符串，请求到资源之后相当于会自动去执行<code>eval(((res) =&gt; { console.log(res)})({&quot;name&quot;:&quot;leihao&quot;,&quot;age&quot;:&quot;20&quot;}))</code>，差不多就是这意思</p> <h1 id="vue"><a href="#vue" class="header-anchor">#</a> VUE</h1> <h3 id="_1】生命周期"><a href="#_1】生命周期" class="header-anchor">#</a> 1】生命周期</h3> <p><code>beforeCreate</code>：初始化事件&amp;生命周期</p> <p><code>created</code>：初始化依赖注入&amp;校验</p> <p><code>beforeMount</code>：<code>el</code>选项<code>template</code>转换成<code>render()</code>函数，diff算法生产VDOM</p> <p><code>mounted</code>：将VDOM渲染挂载到真实DOM上</p> <p><code>beforeUpdate</code>：监听到数据data(state)被修改，diff算法生成vdom</p> <p><code>updated</code>：虚拟dom重新渲染并应用更新</p> <p><code>beforeDestroy</code>：解除绑定销毁组件以及事件监听器</p> <p><code>destroyed</code>：销毁完毕</p> <h3 id="_2】computed、watch、methods"><a href="#_2】computed、watch、methods" class="header-anchor">#</a> 2】computed、watch、methods</h3> <p>coumputed 是计算属性，watch是侦听属性，methods是方法</p> <p>computed 和 methods 相比，最大区别是 computed 有缓存：如果 computed 属性依赖的属性没有变化，那么 computed 属性就不会重新计算。methods 则是看到一次计算一次。</p> <p>watch 和 computed 相比，computed 是计算出一个属性（废话），而 watch 则可能是做别的事情（如上报数据）。如果在data中没有相应的属性的话，是不能watch的，这点和computed不一样。</p> <ul><li><strong>如果一个数据依赖于其他数据，那么把这个数据设计为computed的</strong></li> <li><strong>如果你需要在某个数据变化时做一些事情，使用watch来观察这个数据变化</strong></li></ul> <h3 id="_3】vue组件间通信"><a href="#_3】vue组件间通信" class="header-anchor">#</a> 3】vue组件间通信</h3> <p>方式一：父传子<code>props</code>、子传父<code>$emit + v-on</code>、兄弟传值<code>eventBus</code>（<code>eventBus.$emit + eventBus.$on</code>）</p> <p>方式二：直接访问dom实例 <code>$refs + ref</code>属性</p> <p>方式三：vuex单一状态树</p> <p>方式四：<code>localStorage</code>、<code>sessionStorage</code>进行传值</p> <h3 id="_4】vue-数据响应式"><a href="#_4】vue-数据响应式" class="header-anchor">#</a> 4】Vue 数据响应式</h3> <p>Vue 的响应式，核心机制是 <strong>观察者模式</strong>来实现<strong>数据驱动</strong>。（只是实现了找到需要更新的组件。）</p> <p><img src="https://img-blog.csdnimg.cn/20200826150347103.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTIyMTAzNg==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p> <p>vue组件在初始化时，首先会递归遍历data选项，使用<code>Object.defineProperty</code>对里面的属性进行封装（数据劫持），每一个组件生成一个watcher对象，然后组件template进行模板编译解析生成AST，此时模板中的数据触发getter，对应的watcher进行依赖收集，render生成vdom，随后mount，渲染成真实dom。</p> <p>组件数据更新时，触发setter，通知wacher（一个wacher对应一个组件）需要视图更新，重新render生成新的vdom，调用patch方法进行新旧vdom的diff算法比较，打补丁渲染到真实dom上。</p> <h3 id="_5】vue和react的视图更新机制对比"><a href="#_5】vue和react的视图更新机制对比" class="header-anchor">#</a> 5】Vue和React的视图更新机制对比</h3> <p>Vue和React的其中一个最重要的区别是它们对于数据更新的管理方式不同，Vue基本上是一套基于getter/setter实现的依赖收集/依赖更新的<strong>订阅式机制</strong>，而React则是通过<strong>显式的触发函数</strong>调用来更新数据，比如setState。相比来说Vue的实现方式更细粒度一些， 通过依赖收集，Vue是能够知道一些数据的更新导致了哪些地方需要重新计算的，通过这种机制，Vue能够优雅地实现计算属性、watch，包括视图渲染。而React由于缺少这种细粒度的机制，则更多时候需要一些其它方案来提高性能，于是产生了如PureComponent（区别于普通Component，浅比较state和props）、ImmutableJS、shouldComponentUpdate钩子等等。</p> <h4 id="vue和react如何更新视图？"><a href="#vue和react如何更新视图？" class="header-anchor">#</a> Vue和React如何更新视图？</h4> <ul><li>Vue：赋值data，如<code>this.value = 3</code></li> <li>React：<code>this.setState({value: 3})</code></li></ul> <p>其中的区别在于，Vue知道是组件数据中的value字段发生更新了， 而<strong>React只知道是组件的State发生了变化</strong>，并不知道是什么数据发生了变化。</p> <ul><li>react会setState之后会把该组件和所有内嵌的子组件一起重新render成vdom来diff</li> <li>vue只会对一个watcher对应的一个组件来render生产vdom来diff</li></ul> <h3 id="_6】vue-router"><a href="#_6】vue-router" class="header-anchor">#</a> 6】Vue Router</h3> <h4 id="基本使用："><a href="#基本使用：" class="header-anchor">#</a> 基本使用：</h4> <ol><li>创建路由实例对象</li> <li>配置路由映射关系</li> <li>使用路由标签（通过<code>&lt;router-link&gt;</code>和<code>&lt;router-view&gt;</code>）</li> <li>嵌套路由使用<code>children</code> <ul><li>$router就是<code>new VueRouter()</code>整个实例对象，<code>$route</code>是指当前页面路由对象</li></ul></li></ol> <h4 id="hash模式：（location-api）"><a href="#hash模式：（location-api）" class="header-anchor">#</a> hash模式：（location API）</h4> <ul><li>Location 对象包含有关当前 URL 的信息
<ul><li><code>location.hash='foo'</code> 设置或<strong>返回从井号 (#) 开始的 URL（锚）</strong>。（并不会请求服务器）</li> <li><code>location.href='xxx'</code> 设置或返回完整的 URL。（会请求服务器）</li></ul></li></ul> <h4 id="history模式：（history-api）"><a href="#history模式：（history-api）" class="header-anchor">#</a> history模式：（history API）</h4> <ul><li>History 对象包含用户（在浏览器窗口中）访问过的 URL
<ul><li><code>history.pushState()</code>加入url到浏览器历史列表（类似入栈）</li> <li><strong>此时修改的url是在#的前面部分</strong>，<strong>#后面的部分是hash来控制</strong>。</li></ul></li> <li>强制刷新会向服务器请求，需要服务器设置中间件来解决</li></ul> <p>使用vue-router来实现的单页应用，访问http://cnode.lsqy.tech，进入首页，点击按钮跳入另一个路由，一切都是很正常的，但当这时刷新页面，发现就会出现404了。出现这样的错误Cannot GET /message/，因为默认浏览器会认为你是在请求服务端的路由，服务端那边没有对应的处理，所以自然就会出错了。</p> <p>可以引入<strong>connect-history-api-fallback</strong>中间件来解决</p> <h3 id="_9】路由懒加载"><a href="#_9】路由懒加载" class="header-anchor">#</a> 9】路由懒加载</h3> <p>当打包构建应用，JavaScript包会变得非常大，影响页面加载。我们把不同路由对应的组件分割成不同的代码块，就可以实现按需加载。</p> <p>结合 Vue 的<strong>异步组件</strong>和 Webpack 的<strong>代码分割功能</strong>，轻松实现路由组件的<strong>懒加载</strong>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;name&quot; */</span> <span class="token string">'./Foo.vue'</span><span class="token punctuation">)</span><span class="token comment">//懒加载组件Foo</span>
</code></pre></div><p>上代码是有下面两部构成：首先，可以将异步组件定义为返回一个 Promise 的工厂函数：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">/* 组件定义对象 */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>第二，在 Webpack 2 中，我们可以使用<strong>动态import</strong>语法来定义<strong>代码分块点</strong>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;name&quot; */</span> <span class="token string">'./Foo.vue'</span><span class="token punctuation">)</span> 
<span class="token comment">// 返回 Promise（加上注释来设置异步加载打包后的文件名）</span>
</code></pre></div><h3 id="_8】路由守卫"><a href="#_8】路由守卫" class="header-anchor">#</a> 8】路由守卫</h3> <p>导航守卫就是路由跳转过程中的一些<strong>钩子函数</strong>。</p> <p>导航守卫：beforeEach、beforResolve、afterEach</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//前置钩子</span>
  <span class="token comment">// ...</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span><span class="token keyword">from</span><span class="token punctuation">)</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//一定要调用该方法来 resolve 这个钩子</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span><span class="token keyword">from</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token comment">//后置钩子</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'----'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">//会发现beforeEach先打印，然后afterEach后打印</span>
</code></pre></div><p>每个守卫方法接收三个参数：</p> <ul><li><code>to: Route</code>: 即将要进入的目标路由对象</li> <li><code>from: Route</code>: 当前导航正要离开的路由</li> <li><code>next: Function</code>: 调用该方法后，才能进入下一个钩子</li></ul> <p>使用白名单进行整个路由登录拦截。</p> <p><img src="https://img-blog.csdnimg.cn/20200713195958274.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTIyMTAzNg==,size_16,color_FFFFFF,t_70" alt="vue中白名单全局导航守卫"></p> <h3 id="_11】keep-alive组件缓存"><a href="#_11】keep-alive组件缓存" class="header-anchor">#</a> 11】keep-alive组件缓存</h3> <p>keepalive是一个抽象组件，缓存vnode，缓存的组件没有mounted中的diff步骤，为此提供 activated 和 deactivated <strong>生命周期函数</strong>, 使用include、exclude、max <strong>属性值</strong>可以控制缓存匹配对应的组件以及组件个数。</p> <p><strong>配合vue-router使用</strong>可通过routes 配置中的<strong>meta属性</strong>来设置组件是否被keepAlive所缓存。</p> <div class="language-js extra-class"><pre class="language-js"><code>    meta<span class="token operator">:</span> <span class="token punctuation">{</span>
      keepAlive<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 需要被缓存</span>
    <span class="token punctuation">}</span>
    meta<span class="token operator">:</span> <span class="token punctuation">{</span>
      keepAlive<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// 不需要被缓存</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="_10】vuex"><a href="#_10】vuex" class="header-anchor">#</a> 10】Vuex</h3> <p>集中式状态管理，单一状态树（唯一的store来管理），是响应式的。</p> <p>state、getters（计算属性）、mutations（同步）、actions（异步）、modules</p> <p><img src="https://img-blog.csdnimg.cn/20200531201312485.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTIyMTAzNg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <h3 id="_11】vue-nexttick"><a href="#_11】vue-nexttick" class="header-anchor">#</a> 11】<a href="https://segmentfault.com/a/1190000012861862" target="_blank" rel="noopener noreferrer">Vue.nextTick<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p><a href="https://cn.vuejs.org/v2/api/#Vue-nextTick" target="_blank" rel="noopener noreferrer">官方文档说明<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：</p> <ul><li>用法：在下次 DOM 更新循环结束之后执行延迟回调。在修改数据之后立即使用这个方法，获取更新后的 DOM。</li></ul> <p>用法和react中的<code>setState({},callback)</code>第二个参数callback差不多，都是视图更新后进行回调。</p> <h3 id="_12】mixins"><a href="#_12】mixins" class="header-anchor">#</a> 12】mixins</h3> <ul><li>组件有mixins选项，是数组类型，里面可以接收mixin对象，<code>mixins:[mixinObject]</code></li> <li>全局Vue对象可以调用<code>mixin()</code>方法，里面接收mixin对象，<code>Vue.mixin(mixinObject)</code></li> <li>mixin对象与组件选项会进行合并；如果有冲突，组件优先级高于mixin</li></ul> <h1 id="react"><a href="#react" class="header-anchor">#</a> react</h1> <h3 id="_1】渲染原理"><a href="#_1】渲染原理" class="header-anchor">#</a> 1】渲染原理</h3> <p>dom diff是通过JS层面的计算，返回一个patch对象，即补丁对象（描述两个虚拟dom差异），在通过特定的操作解析patch对象，完成页面的重新渲染。作用是比较两个虚拟DOM区别，根据两个虚拟dom创建出补丁（描述差异），将这个补丁（差异对象）用来更新真实dom</p> <p>react的优化：</p> <ul><li>同层节点之间相互比较，不会垮节点比较；</li> <li>发现不同直接跳出比较。</li> <li>开发中，可以通过key来指定哪些节点在不同的渲染下保持稳定（<strong>节点复用</strong>）；</li> <li>不同类型的节点，产生不同的树结构；</li></ul> <h3 id="_2】生命周期"><a href="#_2】生命周期" class="header-anchor">#</a> 2】生命周期</h3> <p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zczAuYmRzdGF0aWMuY29tLzcwY0Z1SFNoX1ExWW54R2twb1dLMUhGNmhoeS9pdC91PTk2NzM5NDk5LDc3NjM1NDAzOSZmbT0yNiZncD0wLmpwZw?x-oss-process=image/format,png" alt=""></p> <h4 id="通过shouldcomponentupdate优化性能："><a href="#通过shouldcomponentupdate优化性能：" class="header-anchor">#</a> 通过shouldComponentUpdate优化性能：</h4> <p>父组件中的state或props改变，会导致父组件中的所有子组件都触发一次render，子组件触发render都是没必要的，可以子组件使用以下生命周期就是拦截。</p> <ul><li>在子组件中的shouldComponentUpdate生命周期中进行判断</li> <li><code>shouldComponentUpdate(nextProps,nextState)</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span>nextState</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>nextState<span class="token punctuation">.</span>open<span class="token operator">!==</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>open<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>nextProps<span class="token punctuation">.</span>color<span class="token operator">!==</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
  
  state<span class="token operator">=</span><span class="token punctuation">{</span>
    open<span class="token operator">:</span><span class="token string">'opened'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3】purecomponent"><a href="#_3】purecomponent" class="header-anchor">#</a> 3】PureComponent</h3> <p>React.PureComponent 与 React.Component 几乎完全相同，但React.PureComponent通过props和state的<strong>浅比较</strong>来实现了<code>shouldComponentUpate()</code></p> <ul><li>如果对象包含复杂的数据结构，它可能会因深层的数据不一致而产生错误的否定判断(表现为对象深层的数据已改变，视图却没有更新）</li> <li>浅比较 只会比较到两个对象的 ownProperty 是否符合<code>Object.js()</code>判等，不会递归地去深层比较---<a href="https://github.com/facebook/fbjs/blob/c69904a511b900266935168223063dd8772dfc40/packages/fbjs/src/core/shallowEqual.js#L39" target="_blank" rel="noopener noreferrer">源码<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p><a href="https://www.jianshu.com/p/0d0587fc33de" target="_blank" rel="noopener noreferrer">浅比较shallowEqual源码<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">shallowEqual</span><span class="token punctuation">(</span><span class="token parameter">objA<span class="token operator">:</span> mixed<span class="token punctuation">,</span> objB<span class="token operator">:</span> mixed</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is</span><span class="token punctuation">(</span>objA<span class="token punctuation">,</span> objB<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    <span class="token keyword">typeof</span> objA <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">||</span>
    objA <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span>
    <span class="token keyword">typeof</span> objB <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">||</span>
    objB <span class="token operator">===</span> <span class="token keyword">null</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> keysA <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>objA<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> keysB <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>objB<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>keysA<span class="token punctuation">.</span>length <span class="token operator">!==</span> keysB<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Test for A's keys different from B.</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> keysA<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      <span class="token operator">!</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>objB<span class="token punctuation">,</span> keysA<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span>
      <span class="token operator">!</span><span class="token function">is</span><span class="token punctuation">(</span>objA<span class="token punctuation">[</span>keysA<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> objB<span class="token punctuation">[</span>keysA<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><ol><li>通过is函数对两个参数进行比较，判断是否相同，相同直接返回true：基本数据类型值相同，同一个引用对象都表示相同</li> <li>如果两个参数不相同，判断两个参数是否至少有一个不是引用类型，存在即返回false，如果两个都是引用类型对象，则继续下面的比较；</li> <li>判断两个不同引用类型对象是否相同
3.1 先通过Object.keys获取到两个对象的所有属性，具有相同属性，且每个属性值相同即两个对相同（相同也通过is函数完成）</li></ol></blockquote> <h3 id="_4】immutable-js不可变数据"><a href="#_4】immutable-js不可变数据" class="header-anchor">#</a> 4】Immutable.js不可变数据</h3> <p>Immutable Data 就是一旦创建，就不能再被跟更改的数据。对 Immutable对象 的任何的修改或添加删除操作都会返回一个新的 Immutable对象 。</p> <p>为什么需要数据不能被改变？</p> <ul><li><p>redux等相关应用。redux中的数据是只读的，在使用redux操作的时候，第一步是对数据进行拷贝操作。</p></li> <li><p>对于全局数据来讲，不能每个函数都可以进行修改它，会导致项目不稳定出bug。</p></li> <li><p>所以往往我们对数据进行修改的时候都需要去进行拷贝数据。</p></li> <li><p>优点：</p> <ul><li>降低Mutable带来的复杂度</li> <li>节省内存空间（只把修改的节点拷贝了一份）</li> <li>方便开发Undo/Redo（撤销），Copy/Paste（拷贝）</li> <li>拥抱函数式编程（高阶函数）</li></ul></li> <li><p>缺点：</p> <ul><li>容易与原生对象混用</li></ul></li></ul> <p>Immutable基本使用：（<strong>只把修改的属性进行拷贝，不修改的属性进行共享</strong>）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Map <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'immutable'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token function">Map</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span>
  accont<span class="token operator">:</span><span class="token function">Map</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token constant">QQ</span><span class="token operator">:</span><span class="token string">'123456'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'lisi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//只修改了name，并没有修改accont</span>
<span class="token comment">//此时的变量b就是：先把要修改的属性拷贝一份，然后再去修改它，没有修改的属性就是共享。</span>
<span class="token comment">//此时我们可以看到a和b地址是不同的</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token operator">===</span>b<span class="token punctuation">)</span><span class="token comment">//false</span>
<span class="token comment">//但是a和b中的account又是共享的。</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'account'</span><span class="token punctuation">)</span><span class="token operator">===</span>b<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'account'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//true</span>
</code></pre></div><p><code>{...obj}=&gt;只浅拷贝了一层</code></p> <h4 id="解决什么问题？"><a href="#解决什么问题？" class="header-anchor">#</a> <a href="https://segmentfault.com/a/1190000017294051" target="_blank" rel="noopener noreferrer">解决什么问题<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>？</h4> <ul><li>引用类型变量会共享同一个地址。</li> <li>如果我们希望的是：引用类型变量赋值之后是拷贝的新对象的话就需要使用深拷贝，但是深拷贝的开销太大，此时就需要使用immutable。</li> <li>所以说immutable解决的是深拷贝开销大的问题。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
  b<span class="token operator">:</span><span class="token number">2</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj1<span class="token operator">=</span>obj
obj1<span class="token punctuation">.</span>a<span class="token operator">=</span><span class="token number">999</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token comment">//999</span>
</code></pre></div><p>再比如：在react中<code>shouldComponentUpdate(nextProps,nextState)</code>，当props或state对象中的值是一个引用，我们对引用中的具体数据进行修改，nextState和this.state依然会是相等的。就不能正确判断数据改变了。</p> <p>我们来看看区别：下面这个问题就可以使用immutable来解决</p> <p>例子：比较nextProps和this.props的值，会发现尽管两个打印出来的值是一样的，但是使用===比较始终不相等。如果我们使用immutable的话，nextProps和this.props就会共享块地址，当修改属性的时候，就会拷贝一份修改时候的属性，然后返回两个不同的immutable对象，可以对比出差异。</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">//父组件</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">HHH</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'leihao'</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">XXX</span></span> <span class="token attr-name">name</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'zhangsan'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">改变名字</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//子组件</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">XXX</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> nextProps <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'render'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p><img src="https://img-blog.csdnimg.cn/20200902155447350.gif#pic_center" alt="在这里插入图片描述"></p> <p>如果我们此时再来比较nextProps.name和this.props.name，会发现点击修改之后，他们使用===来比较之后就相等了，就可以阻止渲染</p> <p><img src="https://img-blog.csdnimg.cn/20200902155502409.gif#pic_center" alt="在这里插入图片描述"></p> <h3 id="_5】setstate进阶"><a href="#_5】setstate进阶" class="header-anchor">#</a> 5】setState进阶</h3> <p><code>setState</code>方法和<code>state</code>、<code>props</code>一样的都是从<code>React</code>的<code>Component</code>中<strong>继承</strong>过来的。</p> <p>使用格式如下：<code>setState(partialState, callback)</code></p> <ul><li><code>setState</code><strong>接受两个参数</strong>：
<ul><li>第一个参数是：需要更新到的状态，一般是个对象<code>{ }</code></li> <li>第二个参数是：一个回调函数，这个回调函数会在更新后会执行；</li></ul></li></ul> <p>setState是<strong>异步</strong>的，我们在setState之后，并不能立即打印出更改后的状态。而且<code>setState</code>的异步还不是一般的异步操作，是react专门通过算法实现的，使用一段代码中<code>setState</code>多次更新同一项属性，只会被执行一次。</p> <ul><li>提高了性能，多次setState只会render一次。</li></ul> <h4 id="那么如何可以获取到更新后的值呢？"><a href="#那么如何可以获取到更新后的值呢？" class="header-anchor">#</a> 那么如何可以获取到更新后的值呢？</h4> <p>1】方式一：</p> <p>使用<code>setState()</code>的<strong>第二个参数（回调函数中获取）</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">changeText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    message<span class="token operator">:</span> <span class="token string">&quot;你好啊,李银河&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//此回调函数会在更新state的时候被调用执行</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 你好啊,李银河</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>2】方式二：</p> <p>在组件<strong>生命周期中</strong>进行截获</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> provState<span class="token punctuation">,</span> snapshot</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//渲染更新之后进行获取。</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="其实分成两种情况："><a href="#其实分成两种情况：" class="header-anchor">#</a> 其实分成两种情况：</h4> <ul><li><strong>在组件生命周期或<code>React</code>合成事件</strong>中，<code>setState</code>是<strong>异步</strong>；（异步操作，但特定情况下只会执行一次，性能被优化）</li> <li><strong>在<code>setTimeout</code>或者原生<code>dom</code>事件</strong>中，<code>setState</code>是<strong>同步</strong>；（完全就是同步函数）</li></ul> <h3 id="_6】react合成事件"><a href="#_6】react合成事件" class="header-anchor">#</a> 6】react合成事件</h3> <p>React合成事件一套机制：React并不是将click事件直接绑定在dom上面，而是采用<strong>事件冒泡的形式冒泡到document</strong>上面，然后React将事件<strong>封装给SyntheticEvent函数</strong>处理、运行和处理。</p> <p>React为了<strong>避免DOM事件滥用</strong>，同时屏蔽底层不同浏览器之间的事件系统差异</p> <ol><li><strong>冒泡到document顶层</strong> <ul><li>当用户在为onClick添加函数时，React并没有将Click事件绑定在DOM上面。</li></ul></li> <li><strong>封装所有事件给SyntheticEvent事件合成</strong>（负责所有事件合成）
<ul><li>而是在document处监听所有支持的事件，当事件发生并冒泡至document处时，React将事件内容封装交给中间层SyntheticEvent（负责所有事件合成）</li></ul></li> <li><strong>函数dispatchEvent统一分发</strong> <ul><li>所以当事件触发的时候，对使用统一的<strong>分发函数dispatchEvent</strong>将指定函数执行。</li></ul></li></ol> <h4 id="原生事件和react合成事件混合使用注意："><a href="#原生事件和react合成事件混合使用注意：" class="header-anchor">#</a> 原生事件和react合成事件混合使用注意：</h4> <ul><li>响应顺序（原生事件一般情况执行顺序先于react合成事件）</li> <li>如果我们在原生事件中使用<code>e.stopPropagation()</code>进行阻止冒泡事件，可能会影响react合成事件的先外层冒泡，而导致错误</li></ul> <h3 id="_7】redux原理"><a href="#_7】redux原理" class="header-anchor">#</a> 7】redux原理</h3> <p>三大原则：</p> <ul><li>单一数据源</li> <li>state是只读的</li> <li>使用纯函数
<ul><li><strong>一个函数在程序执行的过程中只会根据输入参数给出运算结果</strong>，我们把这类函数称为“<strong>纯函数</strong>”</li></ul></li></ul> <p>control层：<code>store=createStore(reducer(state,action))</code></p> <p>view层：<code>store.dispatch(action.fun(..))</code></p> <p>model层：<code>state={xxx:store.getState()}</code></p> <h4 id="context通信："><a href="#context通信：" class="header-anchor">#</a> context通信：</h4> <p>provider、consumer</p> <p><img src="https://img-blog.csdnimg.cn/20200718111314330.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTIyMTAzNg==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p> <h1 id="webpack"><a href="#webpack" class="header-anchor">#</a> webpack</h1> <h3 id="_1】基本配置、loader、plugin"><a href="#_1】基本配置、loader、plugin" class="header-anchor">#</a> 1】基本配置、loader、plugin</h3> <p>webpack本身只支持加载JS和JSON文件，在编写JS代码时可以导入任何类型的文件（比如css、png、less等），在webpack打包过程中就必须使用loader对除JS以外的类型文件进行加载，分析出JS代码中对这些文件的依赖关系。最终将这些依赖关系打包到一个bundle.js文件中，并且将这些所有静态资源文件一同拷贝到dist文件夹下。期间可以使用plugin机制对整个打包的过程进行处理，实现很强大的打包功能。（注意：css-loader是让webpack读懂css代码，然后去找有没有@import，将依赖关系打包起来，最终这些css文件是会被拷贝到dist文件夹下）</p> <p>开发阶段需要模块化组织ES6代码和css等文件，生产阶段js转换成兼容性更高的ES5代码并且将文件内容按照依赖关系打包到一起，线上版本不需要模块化。</p> <p>以下是webpack.config.js的基本配置：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> cleanWebpackPlugin <span class="token punctuation">}</span><span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> uglifyjsPlugin<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'uglifyjs-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> htmlWebpackPlugin<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> copyWebpackPlugin<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'copy-webpack-plugin'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token comment">//entry可以接受一个对象或者字符串</span>
  entry<span class="token operator">:</span><span class="token punctuation">{</span>
    app<span class="token operator">:</span><span class="token string">'./src/app.js'</span><span class="token punctuation">,</span>
    vendors<span class="token operator">:</span><span class="token string">'./src/vendors.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span><span class="token punctuation">{</span>
    path<span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//设置出口路径</span>
    filename<span class="token operator">:</span><span class="token string">'[name].js'</span><span class="token comment">//设置打包好的文件的名字，[name]是指定出口文件名对应的是入口的别名</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  modules<span class="token operator">:</span><span class="token punctuation">{</span>
    rules<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token operator">:</span><span class="token regex">/\.css$/</span><span class="token punctuation">,</span><span class="token comment">//根据打包过程中所遇到文件路径匹配是否使用这个loader</span>
      use<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span><span class="token comment">//指定具体使用的loader</span>
      <span class="token comment">////*重要*：使用多个loader时，是从后往前读取，这里就是先使用css-loader，再使用style-loader（通过脚本创建&lt;style&gt;标签里面包含css样式）</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">cleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//每次打包时清除dist文件夹</span>
    <span class="token keyword">new</span> <span class="token class-name">uglifyjsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//压缩代码</span>
    <span class="token keyword">new</span> <span class="token class-name">htmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token comment">//生成html入口文件</span>
      title<span class="token operator">:</span><span class="token string">'Webpack Example'</span><span class="token punctuation">,</span>
      meta<span class="token operator">:</span><span class="token punctuation">{</span>
        viewport<span class="token operator">:</span><span class="token string">'width=device-width'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">copyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token comment">//将不需要参与打包的文件拷贝到dist文件夹</span>
      <span class="token string">'public'</span><span class="token comment">//需要拷贝的目录或者路径</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注意：NodeJS中<code>path.resolve</code>的用法：（看的出区别吗）</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//  /Users/mac/Desktop/测试代码</span>
<span class="token keyword">const</span> path<span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//相对路径</span>
<span class="token comment">//  /Users/mac/Desktop/测试代码/dist</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//相对路径</span>
<span class="token comment">//  /Users/mac/Desktop/测试代码/dist</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'/dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//绝对路径</span>
<span class="token comment">//  /dist</span>
</code></pre></div><h3 id="_2】按需加载"><a href="#_2】按需加载" class="header-anchor">#</a> 2】<a href="https://webpack.docschina.org/api/module-methods/#requireensure" target="_blank" rel="noopener noreferrer">按需加载<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <h4 id="为什么要按需加载？"><a href="#为什么要按需加载？" class="header-anchor">#</a> 为什么要按需加载？</h4> <p>在一个前端应用中，将所有的代码都打包进一个或几个文件中，加载的时候，把所有文件都加载进来，然后执行我们的前端代码。只要我们的应用稍微的复杂一点点，包括依赖后，打包后的文件都是挺大的。而我们加载的时候，不管那些代码有没有执行到，都会下载下来。如果说，我们 <strong>只下载我们需要执行的代码的</strong> 话，那么可以节省相当大的流量。也就是我们所说的 <strong>按需加载</strong>。（比如：vue中的路由懒加载，就是借助webpack的<strong>动态import语法</strong>来定义代码分割点实现的。）</p> <p>实现按需加载使用到的是<code>require.ensure(dependencies, callback, chunkName)</code>，但是<code>require.ensure()</code>已被 <code>import()</code>取代。</p> <p>这个方法可以实现js的按需加载，分开打包，webpack 管包叫 <code>chunk</code>，为了打包能正常输出，我们先给webpack配置文件配置一下chunk文件输出路径：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    chunkFilename<span class="token operator">:</span> <span class="token string">'[name].[chunkhash:5].chunk.js'</span><span class="token punctuation">,</span>
    publicPath<span class="token operator">:</span> <span class="token string">'/dist/'</span>
  <span class="token punctuation">}</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="按需加载原理："><a href="#按需加载原理：" class="header-anchor">#</a> <a href="https://github.com/eyasliu/blog/issues/8" target="_blank" rel="noopener noreferrer">按需加载原理<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// a.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// b.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// c.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// entry.js</span>
require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'chunk1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'chunk2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>将会打包出 3 个文件，基础包、chunk1 和 chunk2，但是chunk2在if判断中，而且永远为false，所以 chunk2 虽然打包了但永远不会被加载。</p> <h1 id="git"><a href="#git" class="header-anchor">#</a> Git</h1> <h3 id="_1】git-rebase"><a href="#_1】git-rebase" class="header-anchor">#</a> 1】git rebase</h3> <p><img src="https://img-blog.csdnimg.cn/20200901123249834.JPG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTIyMTAzNg==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p> <p><code>git reset --hard HEAD^</code> （回退到的版本库地址，这里是上一次提交）</p> <p>：重置缓存区和工作目录</p> <h1 id="linux操作系统"><a href="#linux操作系统" class="header-anchor">#</a> Linux操作系统</h1> <h3 id="_1】系统目录结构"><a href="#_1】系统目录结构" class="header-anchor">#</a> 1】<a href="https://www.runoob.com/linux/linux-system-contents.html" target="_blank" rel="noopener noreferrer">系统目录结构<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>登录linux系统之后你会看到以下文件夹</p> <p><img src="https://www.runoob.com/wp-content/uploads/2014/06/4_20.png" alt="img"></p> <p>树状目录结构：</p> <p><img src="https://www.runoob.com/wp-content/uploads/2014/06/d0c50-linux2bfile2bsystem2bhierarchy.jpg" alt="img"></p> <ul><li><strong>/bin</strong>：bin 是 Binaries (二进制文件) 的缩写, 这个目录存放着最经常使用的命令。</li> <li><strong>/boot</strong>：这里存放的是启动 Linux 时使用的一些核心文件，包括一些连接文件以及镜像文件。</li> <li><strong>/etc</strong>：etc 是 Etcetera(等等) 的缩写,这个目录用来存放所有的系统管理所需要的配置文件和子目录。</li> <li><strong>/usr</strong>：usr 是 unix shared resources(共享资源) 的缩写，这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于 windows 下的 program files 目录。</li> <li><strong>/home</strong>：用户的主目录，在 Linux 中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的，如上图中的 alice、bob 和 eve。</li> <li><strong>/lib</strong>：lib 是 Library(库) 的缩写这个目录里存放着系统最基本的动态连接共享库，其作用类似于 Windows 里的 DLL 文件。几乎所有的应用程序都需要用到这些共享库。</li> <li><strong>/root</strong>：该目录为系统管理员，也称作超级权限者的用户主目录。</li></ul> <h1 id="职业规划"><a href="#职业规划" class="header-anchor">#</a> 职业规划</h1> <p>分时间段：</p> <p>短期：继续夯实基础，自己封装一个属于自己的组件库，学再研究一门框架</p> <p>中长期：再研究一门后端语言java为我们公司更好的服务。</p> <p>长期：我也相信咱们公司有合理晋升机制，争取公司的机会</p> <p>科来官网bug、我们公司的发展行业发展前景。</p> <p>遇到的最难的问题：保持质疑的态度，找资源去验证。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">8/1/2021, 1:57:14 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.27102bc9.js" defer></script><script src="/assets/js/2.8dfe8e5f.js" defer></script><script src="/assets/js/15.b827ce0c.js" defer></script>
  </body>
</html>
